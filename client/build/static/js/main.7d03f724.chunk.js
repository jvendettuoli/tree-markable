(this["webpackJsonptree-markable-client"]=this["webpackJsonptree-markable-client"]||[]).push([[0],{263:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),c=r.n(a),o=r(22),s=r.n(o),i=r(170),u=r(7),l=r(172),d=r(139),p=r(173),j=r.n(p),b=r(174),m=r.n(b),h=r(175),O=r(48),f=r(31),g=r(123),x=r(15),v=r(4),y="LOAD_TREE",w="LOAD_TREES",k="REMOVE_TREE",C="TREE_ERROR",T="TREE_REQUEST_START",_="TREE_REQUEST_SUCCESS",S="TREE_REQUEST_FAILURE",E="LOAD_GROUP",R="REMOVE_GROUP",A="LOAD_GROUPS",U="LOAD_TREE_TO_GROUP",I="REMOVE_TREE_FROM_GROUP",M="REMOVE_MEMBER_FROM_GROUP",P="GROUP_ERROR",G="GROUP_REQUEST_START",D="GROUP_REQUEST_SUCCESS",N="GROUP_REQUEST_FAILURE",F="LOAD_CURR_USER",B="LOAD_CURR_USER_ERROR",L="LOAD_CURR_USER_REQUEST",W="LOAD_CURR_USER_SUCCESS",q="LOAD_CURR_USER_FAILURE",z="RESET_CURR_USER",H="LOAD_SAVED_TREE",V="REMOVE_SAVED_TREE",Q="LOAD_FOLLOWED_GROUP",K="REMOVE_FOLLOWED_GROUP",X="AUTH_USER",J="AUTH_ERROR",Y="SIGN_OUT_USER",Z="RESET_ALL",$={entities:{},status:"idle",error:null};var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(v.a)({},$);case T:return Object(v.a)(Object(v.a)({},e),{},{status:"loading"});case _:return Object(v.a)(Object(v.a)({},e),{},{status:"idle"});case S:return Object(v.a)(Object(v.a)({},e),{},{status:"failure"});case y:return console.log("REDUCERS LOAD_TREE - action",t),Object(v.a)(Object(v.a)({},e),{},{entities:Object(v.a)(Object(v.a)({},e.entities),{},Object(x.a)({},t.payload.id,Object(v.a)({},t.payload))),status:"success",error:null});case w:console.log("REDUCERS LOAD_TREES - action",t);var r=t.payload.reduce((function(e,t){return e[t.id]=t,e}),{});return{entities:r,status:"success",error:null};case k:console.log("REDUCERS REMOVE_TREE - action",t);var n=e.entities,a=t.payload,c=(n[a],Object(f.a)(n,[a].map(g.a)));return Object(v.a)(Object(v.a)({},e),{},{entities:c,status:"success",error:null});case C:return console.log("REDUCERS TREE_ERROR - action",t),Object(v.a)(Object(v.a)({},e),{},{error:t.payload});default:return e}},te={token:null,authenticated:!1,error:null};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return console.log("Reducers AUTH_USER - action",t),Object(v.a)(Object(v.a)({},e),{},{token:t.payload.token,authenticated:!0,error:null});case Y:return console.log("Reducers SIGN_OUT_USER - action",t),Object(v.a)({},te);case J:var r;return console.log("Reducers AUTH_ERROR - action",t),r=t.payload.hasOwnProperty("code")?[{status:t.payload.code,message:t.payload.message}]:Array.isArray(t.payload)?t.payload:[t.payload],Object(v.a)(Object(v.a)({},e),{},{error:r});default:return e}},ne=r(24),ae={uid:null,username:null,email:null,img_url:null,created_at:null,home_geolocation:[],savedTreeIds:[],followedGroupIds:[],commentIds:[],status:"idle",error:null};var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(v.a)(Object(v.a)({},e),{},{status:"isLoading"});case W:return Object(v.a)(Object(v.a)({},e),{},{status:"idle"});case q:return Object(v.a)(Object(v.a)({},e),{},{status:"failure"});case F:return console.log("Reducers LOAD_CURR_USER - action",t),Object(v.a)(Object(v.a)({},e),{},{uid:t.payload.firebase_id,is_admin:t.payload.is_admin,username:t.payload.username,email:t.payload.email,img_url:t.payload.img_url,created_at:t.payload.created_at,home_geolocation:t.payload.home_geolocation,savedTreeIds:t.payload.saved_tree_ids||[],followedGroupIds:t.payload.followed_group_ids||[],commentIds:t.payload.commentIds||[],status:"success",error:null});case B:var r;return console.log("Reducers LOAD_CURR_USER_ERROR - action",t),r=t.payload.hasOwnProperty("code")?[{status:t.payload.code,message:t.payload.message}]:Array.isArray(t.payload)?t.payload:[t.payload],Object(v.a)(Object(v.a)({},e),{},{error:r});case z:return console.log("Reducers RESET_CURR_USER - action",t),Object(v.a)({},ae);case H:return console.log("Reducers LOAD_SAVED_TREE - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",savedTreeIds:[].concat(Object(ne.a)(e.savedTreeIds),[t.payload])});case V:return console.log("Reducers REMOVE_SAVED_TREE - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",savedTreeIds:e.savedTreeIds.filter((function(e){return e!==t.payload}))});case Q:return console.log("Reducers LOAD_FOLLOWED_GROUP - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",followedGroupIds:[].concat(Object(ne.a)(e.followedGroupIds),[t.payload])});case K:return console.log("Reducers REMOVE_FOLLOWED_GROUP - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",followedGroupIds:e.followedGroupIds.filter((function(e){return e!==t.payload}))});default:return e}},oe={entities:{},status:"idle",error:null};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return console.log("REDUCERS RESET_ALL"),Object(v.a)({},oe);case G:return console.log("REDUCERS GROUP_REQUEST_START"),Object(v.a)(Object(v.a)({},e),{},{status:"loading"});case D:return console.log("REDUCERS GROUP_REQUEST_SUCCESS"),Object(v.a)(Object(v.a)({},e),{},{status:"idle"});case N:return console.log("REDUCERS GROUP_REQUEST_FAILURE"),Object(v.a)(Object(v.a)({},e),{},{status:"failure"});case E:return console.log("REDUCERS LOAD_GROUP - action",t),Object(v.a)(Object(v.a)({},e),{},{entities:Object(v.a)(Object(v.a)({},e.entities),{},Object(x.a)({},t.payload.id,Object(v.a)({},t.payload))),status:"success",error:null});case A:console.log("REDUCERS LOAD_GROUPS - action",t);var r=t.payload.reduce((function(e,t){return e[t.id]=t,e}),{});return{entities:r,status:"success",error:null};case R:console.log("REDUCERS REMOVE_GROUP - action",t);var n=e.entities,a=t.payload,c=(n[a],Object(f.a)(n,[a].map(g.a)));return console.log("REDUCERS REMOVE_GROUP - state.entities",e.entities),console.log("REDUCERS REMOVE_GROUP - groups",c),Object(v.a)(Object(v.a)({},e),{},{entities:c,status:"success",error:null});case U:return console.log("REDUCERS LOAD_TREE_TO_GROUP - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",error:null,entities:Object(v.a)(Object(v.a)({},e.entities),{},Object(x.a)({},t.payload.groupId,Object(v.a)(Object(v.a)({},e.entities[t.payload.groupId]),{},{trees:[].concat(Object(ne.a)(e.entities[t.payload.groupId].trees),[t.payload.treeId])})))});case I:return console.log("REDUCERS REMOVE_TREE_FROM_GROUP - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",error:null,entities:Object(v.a)(Object(v.a)({},e.entities),{},Object(x.a)({},t.payload.groupId,Object(v.a)(Object(v.a)({},e.entities[t.payload.groupId]),{},{trees:Object(ne.a)(e.entities[t.payload.groupId].trees.filter((function(e){return e!==t.payload.treeId})))})))});case M:return console.log("REDUCERS REMOVE_MEMBER_FROM_GROUP - action",t),Object(v.a)(Object(v.a)({},e),{},{status:"success",error:null,entities:Object(v.a)(Object(v.a)({},e.entities),{},Object(x.a)({},t.payload.groupId,Object(v.a)(Object(v.a)({},e.entities[t.payload.groupId]),{},{members:Object(ne.a)(e.entities[t.payload.groupId].members.filter((function(e){return e.user_id!==t.payload.userId})))})))});case P:return console.log("REDUCERS GROUP_ERROR - action",t),Object(v.a)(Object(v.a)({},e),{},{error:t.payload});default:return e}},ie=Object(O.combineReducers)({auth:re,currUser:ce,trees:ee,groups:se}),ue={key:"root",storage:j.a,stateReconciler:m.a},le=Object(d.a)(ue,ie),de=Object(O.createStore)(le,Object(l.composeWithDevTools)(Object(O.applyMiddleware)(h.a))),pe=Object(d.b)(de),je=r(13),be=r(3),me=r.n(be),he=r(11),Oe=r(90);r(220),r(265),r(264);Oe.a.initializeApp({apiKey:"AIzaSyBvvX8ArjEXT8I7uy6XdOy5AkInLric890",authDomain:"tree-markable.firebaseapp.com",databaseURL:"https://tree-markable.firebaseio.com",projectId:"tree-markable",storageBucket:"tree-markable.appspot.com",messagingSenderId:"268976140361",appId:"1:268976140361:web:9db5de293dee4ba5820f98",measurementId:"G-T5FD1M78BV"}),Oe.a.analytics();var fe=Oe.a.auth(),ge=Oe.a.storage(),xe=function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("firebaseAuth signUp"),e.next=3,fe.createUserWithEmailAndPassword(t,r);case 3:return n=e.sent,console.log("firebaseAuth signUp - Post"),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ve=function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("firebaseAuth signIn"),e.next=3,fe.signInWithEmailAndPassword(t,r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ye=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("firebaseAuth signOut"),e.next=3,fe.signOut();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(he.a)(me.a.mark((function e(t){var r,n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("firebaseAuth updateProfile",t),!(r=fe.currentUser)){e.next=7;break}return e.next=5,r.updateProfile(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(he.a)(me.a.mark((function e(t){var r,n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("firebaseAuth reauthenticate - credentials",t),r=fe.currentUser,console.log("firebaseAuth reauthenticate - user",r),!r){e.next=9;break}return e.next=6,Oe.a.auth.EmailAuthProvider.credential(t.email||r.email,t.password);case 6:return n=e.sent,e.next=9,r.reauthenticateWithCredential(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(he.a)(me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===fe.currentUser){e.next=5;break}return e.next=3,fe.currentUser.getIdToken(!0);case 3:return t=e.sent,e.abrupt("return",t);case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te=r(99),_e=r(100),Se=r(178),Ee=r.n(Se),Re=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBvvX8ArjEXT8I7uy6XdOy5AkInLric890",REACT_APP_AUTHDOMAIN:"tree-markable.firebaseapp.com",REACT_APP_BASEURL:"https://tree-markable.firebaseio.com",REACT_APP_PROJECT_ID:"tree-markable",REACT_APP_STORAGEBUCKET:"tree-markable.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"268976140361",REACT_APP_APP_ID:"1:268976140361:web:9db5de293dee4ba5820f98",REACT_APP_MEASUREMENT_ID:"G-T5FD1M78BV"}).REACT_APP_BASE_URL||"http://localhost:3001",Ae=function(){function e(){Object(Te.a)(this,e)}return Object(_e.a)(e,null,[{key:"request",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r,n,a,c,o=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:"get",e.prev=2,console.log("PRE API CALL",r),e.next=6,Ce();case 6:return r._token=e.sent,console.debug("API Call:",t,r,n),e.next=10,Ee()(Object(x.a)({method:n,url:"".concat(Re,"/").concat(t)},"get"===n?"params":"data",r));case 10:return a=e.sent,console.log("API res RETURN",a.data),e.abrupt("return",a.data);case 15:if(e.prev=15,e.t0=e.catch(2),!e.t0.response){e.next=23;break}throw console.error("API Error:",e.t0.response),c=e.t0.response.data,Array.isArray(c)?c:[c];case 23:return console.error("TreeMarkableAPI Error:",e.t0),e.abrupt("return",e.t0);case 25:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class Login - Start"),e.next=3,this.request("login",t,"post");case 3:return r=e.sent,e.abrupt("return",r.token);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getUser - Start"),e.next=3,this.request("users/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.user);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerUser",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class registerUser - Start"),e.next=3,this.request("users",t,"post");case 3:return r=e.sent,e.abrupt("return",r.newUser);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateUser",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class updateUser - Start"),e.next=3,this.request("users/".concat(t),r,"patch");case 3:return n=e.sent,e.abrupt("return",n.user);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class deleteUser - Start"),e.next=3,this.request("users/".concat(t),{},"delete");case 3:return r=e.sent,e.abrupt("return",r.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGroups",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getGroups - Start"),e.next=3,this.request("groups",t);case 3:return r=e.sent,e.abrupt("return",r.groups);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGroup",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getGroup - Start"),e.next=3,this.request("groups/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.group);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGroup",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class createGroup - Start"),e.next=3,this.request("groups",t,"post");case 3:return r=e.sent,e.abrupt("return",r.newGroup);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateGroup",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class updateGroup - Start"),e.next=3,this.request("groups/".concat(t),r,"patch");case 3:return n=e.sent,e.abrupt("return",n.editGroup);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class deleteGroup - Start"),e.next=3,this.request("groups/".concat(t),{},"delete");case 3:return r=e.sent,e.abrupt("return",r.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGroupMembers",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getGroupMembers - Start"),e.next=3,this.request("groups/".concat(t,"/members"));case 3:return r=e.sent,e.abrupt("return",r.groupMembers);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTrees",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getTrees - Start"),e.next=3,this.request("trees",t);case 3:return r=e.sent,e.abrupt("return",r.trees);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getTree - Start"),e.next=3,this.request("trees/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.tree);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class createTree - Start"),e.next=3,this.request("trees",t,"post");case 3:return r=e.sent,e.abrupt("return",r.newTree);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class updateTree - Start"),e.next=3,this.request("trees/".concat(t),r,"patch");case 3:return n=e.sent,e.abrupt("return",n.updatedTree);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class deleteTree - Start"),e.next=3,this.request("trees/".concat(t),{},"delete");case 3:return r=e.sent,e.abrupt("return",r.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getComments",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getComments - Start"),e.next=3,this.request("comments/".concat(t,"/").concat(r));case 3:return n=e.sent,e.abrupt("return",n.comments);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getComment",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class getComment - Start"),e.next=3,this.request("comments/".concat(t));case 3:return r=e.sent,e.abrupt("return",r.comment);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createComment",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class createComment - Start",t),e.next=3,this.request("comments",t,"post");case 3:return r=e.sent,e.abrupt("return",r.newComment);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateComment",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class updateComment - Start"),e.next=3,this.request("comments/".concat(t),r,"patch");case 3:return n=e.sent,e.abrupt("return",n.updatedComment);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteComment",value:function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class deleteComment - Start"),e.next=3,this.request("comments/".concat(t),{},"delete");case 3:return r=e.sent,e.abrupt("return",r.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"userAddTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class userAddTree - Start"),e.next=3,this.request("users/".concat(t,"/trees/").concat(r),{},"post");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"userRemoveTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class userRemoveTree - Start"),e.next=3,this.request("users/".concat(t,"/trees/").concat(r),{},"delete");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"userAddGroup",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r,n){var a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class userAddGroup - Start"),e.next=3,this.request("users/".concat(t,"/groups/").concat(r),{isModerator:n},"post");case 3:return a=e.sent,e.abrupt("return",a.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"userRemoveGroup",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class userRemoveGroup - Start"),e.next=3,this.request("users/".concat(t,"/groups/").concat(r),{},"delete");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"groupAddTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class groupAddTree - Start"),e.next=3,this.request("groups/".concat(t,"/trees/").concat(r),{},"post");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"groupRemoveTree",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class groupRemoveTree - Start"),e.next=3,this.request("groups/".concat(t,"/trees/").concat(r),{},"delete");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"groupAddMod",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class groupAddMod - Start"),e.next=3,this.request("groups/".concat(t,"/users/").concat(r,"/addmod"),{},"patch");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"groupRemoveMod",value:function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("TreeMarkableApi Class groupRemoveMod - Start"),e.next=3,this.request("groups/".concat(t,"/users/").concat(r,"/removemod"),{},"patch");case 3:return n=e.sent,e.abrupt("return",n.message);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function Ue(){return console.log("Auth - signOutUser"),function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye();case 3:t({type:Y}),t({type:z}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("signOutUser error",e.t0),t(Me(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function Ie(e){return{type:X,payload:e}}function Me(e){return{type:J,payload:e}}function Pe(e){return{type:F,payload:e}}var Ge=r(30),De=r(34),Ne=r(313),Fe=r(360),Be=r(315),Le=r(94),We=r(105),qe=r.p+"static/media/landing-page-main.3778ef03.jpg",ze=r.p+"static/media/search-trees-snip.b71e6c6e.JPG",He=r.p+"static/media/share-trees.1de5d629.jpg",Ve=r(124),Qe=r(83),Ke=Object(We.a)({imgPaper:{height:300,width:300,zIndex:1,position:"relative",boxShadow:"0px 11px 15px -7px rgba(0,0,0,0.10),\n\t\t\t0px 24px 38px 3px rgba(0,0,0,0.60),\n\t\t\t0px 9px 46px 8px rgba(0,0,0,0.51)"}});var Xe=function(e){var t=e.titleText,r=e.bodyText,a=e.imgSrc,c=e.imgAlt,o=e.imgSide,s=void 0===o?"left":o,i=e.buttonLink,u=e.buttonText,l=Ke(),d=Object(Ge.a)(),p=Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:12,md:6,children:Object(n.jsx)(Ve.a,{className:l.imgPaper,elevation:10,children:Object(n.jsx)(je.b,{to:"/".concat(i),children:Object(n.jsx)("img",{height:"100%",width:"100%",alt:c,title:c,src:a})})})}),j=Object(n.jsxs)(Ne.a,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12,md:6,style:{paddingTop:d.spacing(5)},children:[Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:12,children:Object(n.jsx)(Le.a,{align:"center",variant:"h4",style:{color:"white"},gutterBottom:!0,children:r})}),Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:12,children:Object(n.jsx)(Qe.a,{component:je.b,to:"/".concat(i),variant:"contained",color:"primary",size:"large",children:u})})]});return Object(n.jsxs)(Ne.a,{container:!0,item:!0,justify:"center",style:{paddingTop:d.spacing(5),paddingBottom:d.spacing(8)},children:[Object(n.jsx)(Le.a,{align:"center",variant:"h2",style:{color:"white"},gutterBottom:!0,children:t}),Object(n.jsx)(Fe.a,{only:["xs","sm","xl"],implementation:"js",children:"right"===s?Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,children:[j,p]}):Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,children:[p,j]})}),Object(n.jsx)(Fe.a,{only:["md","lg"],implementation:"js",children:Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,children:[Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:12,children:p}),Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:12,children:j})]})})]})},Je=Object(We.a)((function(e){return{backgroundImage:{height:"100%",backgroundImage:"url(".concat(qe,")"),backgroundAttachment:"fixed",backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:e.palette.secondary.dark}}}));var Ye=function(){var e=Object(Ge.a)(),t=Je(e),r=Object(n.jsx)(Ne.a,{item:!0,xs:12,children:Object(n.jsx)(Be.a,{flexItem:!0,style:{height:2,backgroundColor:"rgba(255,255,255, .5)"},variant:"middle"})});return Object(n.jsx)(Ne.a,{container:!0,className:t.backgroundImage,alignItems:"stretch",children:Object(n.jsxs)(Ne.a,{container:!0,item:!0,style:{backgroundColor:"rgba(0,0,0,.5)",paddingTop:e.spacing(10),paddingRight:e.spacing(3),paddingLeft:e.spacing(3)},children:[Object(n.jsx)(Ne.a,{container:!0,item:!0,style:{marginBottom:e.spacing(10)},justify:"center",children:Object(n.jsx)(Le.a,{align:"center",variant:"h1",style:{color:"white",fontWeight:"bold"},children:"WELCOME TO TREE-MARKABLE"})}),r,Object(n.jsxs)(Fe.a,{xlUp:!0,children:[Object(n.jsx)(Xe,{titleText:"Explore",bodyText:"Find remarkable trees near you or around the world!",imgSrc:ze,imgAlt:"search trees map",buttonLink:"trees",buttonText:"Search Trees"}),r,Object(n.jsx)(Xe,{titleText:"Share",bodyText:"Add your favorite trees for others to enjoy!",imgSrc:He,imgAlt:"large tree photo by Rob Mulally",imgSide:"right",buttonLink:"trees/new",buttonText:"Create a Tree"}),r,Object(n.jsx)(Xe,{titleText:"Collaborate",bodyText:"Create or join groups to track specific trees for a purpose!",imgSrc:ze,imgAlt:"",buttonLink:"groups",buttonText:"Search Groups"})]}),Object(n.jsx)(Fe.a,{lgDown:!0,children:Object(n.jsxs)(Ne.a,{container:!0,children:[Object(n.jsx)(Ne.a,{item:!0,xs:4,children:Object(n.jsx)(Xe,{titleText:"Explore",bodyText:"Find remarkable trees near you or around the world!",imgSrc:ze,imgAlt:"search trees map",buttonLink:"trees",buttonText:"Search Trees"})}),Object(n.jsx)(Ne.a,{item:!0,xs:4,children:Object(n.jsx)(Xe,{titleText:"Share",bodyText:"Add your favorite trees for others to enjoy!",imgSrc:He,imgAlt:"large tree photo by Rob Mulally",imgSide:"right",buttonLink:"trees/new",buttonText:"Create a Tree"})}),Object(n.jsx)(Ne.a,{item:!0,xs:4,children:Object(n.jsx)(Xe,{titleText:"Collaborate",bodyText:"Create or join groups to track specific trees for a purpose!",imgSrc:ze,imgAlt:"",buttonLink:"groups",buttonText:"Search Groups"})})]})})]})})},Ze=r(328),$e=function(e,t){if(null!==t&&0!==t.length){var r=Number.isInteger(t[0].status)?t[0].message:t[0].status,n=new Map;return"username"===e&&n.set("Duplicate username found.","Duplicate username found."),"group_name"===e&&n.set("Duplicate group name found.","Duplicate group name found."),"email"===e&&(n.set("auth/email-already-in-use","The email address is already in use by another account."),n.set("auth/invalid-email","The email address is badly formatted."),n.set("auth/user-not-found","There is no user corresponding to the given email."),n.set("Duplicate email found.","Duplicate email found.")),"password"===e&&(n.set("auth/weak-password","Password is too weak. Must be greater than 6 characters."),n.set("auth/wrong-password","Wrong password.")),"new_password"===e&&n.set("auth/weak-password","Password is too weak. Must be greater than 6 characters."),n.get(r)}},et=r(9),tt=r(193),rt=Object(We.a)((function(e){return{form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}}})),nt=r(118),at=(r(165),r(322)),ct=r(323),ot=r(324),st=r(325),it=r(364),ut=r(267),lt=r(321),dt=r(84),pt=r(318),jt=r(320),bt=r(319),mt=r(317),ht=r(358),Ot=r(141),ft=Object(We.a)({root:{maxWidth:300},media:{height:140},content:{paddingBottom:0,paddingLeft:10,paddingRight:10,"& p":{margin:0}},actions:{paddingBottom:0,paddingTop:2}}),gt=r(316);function xt(e,t){return console.log("currUser - addToSavedTrees - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:L}),r.prev=1,r.next=4,Ae.userAddTree(e,t);case 4:n(Tt(t)),n({type:W}),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("addToSavedTrees error",r.t0),n(Ct(r.t0)),n({type:q});case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function vt(e,t){return console.log("currUser - removeFromSavedTrees - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:L}),r.prev=1,r.next=4,Ae.userRemoveTree(e,t);case 4:n(_t(t)),n({type:W}),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("removeFromSavedTrees error",r.t0),n(Ct(r.t0)),n({type:q});case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function yt(e,t,r){return console.log("currUser - addToFollowedGroups - ",e,t,r),function(){var n=Object(he.a)(me.a.mark((function n(a){return me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:L}),n.prev=1,n.next=4,Ae.userAddGroup(e,t,r);case 4:a(St(t)),a({type:W}),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(1),console.log("addToFollowedGroups error",n.t0),a(Ct(n.t0)),a({type:q});case 13:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}function wt(e,t){return console.log("currUser - removeFromFollowedGroups - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:L}),r.prev=1,r.next=4,Ae.userRemoveGroup(e,t);case 4:n(Et(t)),n({type:W}),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("removeFromFollowedGroups error",r.t0),n(Ct(r.t0)),n({type:q});case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function kt(e){return{type:F,payload:e}}function Ct(e){return{type:B,payload:e}}function Tt(e){return{type:H,payload:e}}function _t(e){return{type:V,payload:e}}function St(e){return{type:Q,payload:e}}function Et(e){return{type:K,payload:e}}var Rt=function(e){var t=e.treeId,r=(ft(),Object(a.useState)(null)),c=Object(et.a)(r,2),o=c[0],s=c[1],i=Object(u.c)((function(e){return e.currUser.uid})),l=Object(u.c)((function(e){return e.currUser.savedTreeIds})),d=Object(u.b)();Object(a.useEffect)((function(){!function(e,t){s(t.includes(e))}(t,l)}),[l,t]);var p=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(o?vt(i,t):xt(i,t)),s(!o);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i?Object(n.jsx)(Ot.a,{title:o?"Unfavorite":"Favorite",children:Object(n.jsx)(dt.a,{onClick:p,children:Object(n.jsx)(gt.a,{htmlColor:o?"red":"pink"})})}):null},At=r(180),Ut=r(181),It=ge.ref(),Mt=It.child("trees"),Pt=(It.child("users"),It.child("groups")),Gt="images",Dt="primary",Nt="album",Ft=function(){var e=Object(he.a)(me.a.mark((function e(t,r,n){var a,c,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("uploadImagesToFirebase - Start:",t,r,n),a=0;case 2:if(!(a<n.length)){e.next=18;break}return c=void 0,c=0===a?t.child("".concat(r,"/").concat(Gt,"/").concat(Dt,"/").concat(n[a].name)):t.child("".concat(r,"/").concat(Gt,"/").concat(Nt,"/").concat(n[a].name)),e.prev=5,e.next=8,c.put(n[a]);case 8:o=e.sent,console.log("uploadImagesToFirebase - res",o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log("uploadImagesToFirebase - err",e.t0);case 15:a++,e.next=2;break;case 18:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n,a,c,o,s,i;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("listImagePathsFromFirebase - start",t,r),e.prev=1,n=t.child("".concat(r,"/").concat(Gt,"/").concat(Dt)),a=t.child("".concat(r,"/").concat(Gt,"/").concat(Nt)),e.next=6,n.listAll();case 6:return c=e.sent,e.next=9,a.listAll();case 9:if(o=e.sent,0!==c.items.length){e.next=12;break}return e.abrupt("return");case 12:return s=0!==o.items.length?o.items.map((function(e){return e.fullPath})):[],i={primary:c.items[0].fullPath,album:s},console.log("listImagePathsFromFirebase - imagePaths",i),e.abrupt("return",i);case 18:e.prev=18,e.t0=e.catch(1),console.error("listImagePathsFromFirebase - err",e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t,r){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n,a,c,o,s,i,u,l,d,p,j;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("downloadImageUrlsFromFirebase - start",t,r),e.prev=1,e.next=4,Bt(t,r);case 4:if(n=e.sent,console.log("downloadImageUrlsFromFirebase - imagePaths",n),n){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,It.child("".concat(n.primary)).getDownloadURL();case 10:a=e.sent,c={primary:a,album:[]},o=!0,s=!1,e.prev=14,u=Object(Ut.a)(n.album);case 16:return e.next=18,u.next();case 18:return l=e.sent,o=l.done,e.next=22,l.value;case 22:if(d=e.sent,o){e.next=32;break}return p=d,e.next=27,It.child("".concat(p)).getDownloadURL();case 27:j=e.sent,c.album.push(j);case 29:o=!0,e.next=16;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(14),s=!0,i=e.t0;case 38:if(e.prev=38,e.prev=39,o||null==u.return){e.next=43;break}return e.next=43,u.return();case 43:if(e.prev=43,!s){e.next=46;break}throw i;case 46:return e.finish(43);case 47:return e.finish(38);case 48:return console.log("downloadImageUrlsFromFirebase - imageUrls",c),e.abrupt("return",c);case 52:e.prev=52,e.t1=e.catch(1),console.error("downloadImageUrlsFromFirebase err - ",e.t1);case 55:case"end":return e.stop()}}),e,null,[[1,52],[14,34,38,48],[39,,43,47]])})));return function(t,r){return e.apply(this,arguments)}}(),Wt=function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n,a,c,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteImagesFromFirebase - start",t,r),e.prev=1,e.next=4,Bt(t,r);case 4:if(n=e.sent,console.log("deleteImagesFromFirebase - imagePaths",n),n){e.next=8;break}return e.abrupt("return");case 8:if(It.child("".concat(n.primary)).delete(),n.album.length>0){a=Object(At.a)(n.album);try{for(a.s();!(c=a.n()).done;)o=c.value,console.log("deleteImagesFromFirebase - imagePath",o),It.child("".concat(o)).delete()}catch(s){a.e(s)}finally{a.f()}}e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("deleteImagesFromFirebase -err",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,r){return e.apply(this,arguments)}}();var qt=function(e){var t=e.tree,r=ft(),c=Object(a.useState)(!0),o=Object(et.a)(c,2),s=o[0],i=o[1],l=Object(a.useState)({primary:"",album:[]}),d=Object(et.a)(l,2),p=d[0],j=d[1],b=Object(u.c)((function(e){return e.auth.authenticated})),m=Object(u.b)();return Object(a.useEffect)((function(){s&&function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(t,r);case 2:(n=e.sent)&&j(n),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(Mt,t.id)}),[s,m]),Object(n.jsxs)(pt.a,{className:r.root,elevation:0,children:[s?Object(n.jsx)(ht.a,{display:"flex",justifyContent:"center",children:Object(n.jsx)(ut.a,{})}):""===p.primary?"":Object(n.jsx)(mt.a,{className:r.media,image:p.primary,title:"".concat(t.name)}),Object(n.jsxs)(bt.a,{className:r.content,children:[Object(n.jsx)(Le.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(n.jsx)(Le.a,{variant:"body2",color:"textSecondary",children:t.common_name}),Object(n.jsx)(Le.a,{variant:"body2",color:"textSecondary",component:"i",children:t.scientific_name}),Object(n.jsx)(Le.a,{variant:"caption",color:"textSecondary",component:"p",children:"(".concat(t.geolocation.y.toFixed(5),", ").concat(t.geolocation.x.toFixed(5),")")})]}),Object(n.jsx)(jt.a,{className:r.actions,children:Object(n.jsxs)(Ne.a,{container:!0,justify:"center",children:[Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:6,children:Object(n.jsx)(Ot.a,{title:"Details",children:Object(n.jsx)(dt.a,{component:je.b,to:"/trees/".concat(t.id),children:Object(n.jsx)(lt.a,{color:"primary"})})})}),b&&Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,xs:6,children:Object(n.jsx)(Rt,{treeId:t.id})})]})})]})},zt=Object(We.a)({mapContainer:{width:"100%",height:450,"& .open":{maxWidth:280}},mapContainerSm:{width:"100%",height:300,"& .open":{maxWidth:280}}}),Ht=new nt.a({position:"topright",showMarker:!1,provider:new nt.b});function Vt(e){var t=e.useGetClickCoordinates,r=void 0!==t&&t,c=e.useSearchComponent,o=void 0===c||c,s=e.useCenterOnUser,i=void 0!==s&&s,u=e.setCenterOnUser,l=e.zoomLevel,d=void 0===l?13:l,p=e.mapCenter,j=void 0===p?[48.09574762069073,-123.42439143699785]:p,b=e.setMapCenter,m=e.onMapCoordinatesChange,h=e.trees,O=void 0!==h&&h,f=e.allowWheelZoom,g=void 0===f||f,x=e.small,v=void 0!==x&&x,y=zt(),w=Object(a.useState)(null),k=Object(et.a)(w,2),C=k[0],T=k[1];Object(a.useEffect)((function(){i&&u(!1)}),[i,u]);var _=function(){return Object(at.b)({click:function(e){T(e.latlng),m({lat:e.latlng.lat,lng:e.latlng.lng}),console.log("clickCoords",C)}}),null===C?null:Object(n.jsx)(ct.a,{position:C,children:Object(n.jsxs)(ot.a,{children:["Tree Geolocation: ","".concat(C)]})})},S=function(){return Object(at.a)().locate({setView:!0}),null},E=function(){return Object(at.a)().addControl(Ht),null},R=function(){var e=Object(at.b)({dragend:function(){console.log(e.getCenter());var t=e.getCenter();b([t.lat,t.lng])}});return null},A=Object(n.jsx)(ut.a,{});return Object(n.jsxs)(st.a,{className:v?y.mapContainerSm:y.mapContainer,placeholder:A,center:j,zoom:d,scrollWheelZoom:g,children:[Object(n.jsx)(it.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r&&Object(n.jsx)(_,{}),o&&Object(n.jsx)(E,{}),i&&Object(n.jsx)(S,{}),b&&Object(n.jsx)(R,{}),O&&O.map((function(e){return Object(n.jsx)(ct.a,{position:[e.geolocation.y,e.geolocation.x],children:Object(n.jsx)(ot.a,{className:y.treeMarkerPopup,children:Object(n.jsx)(qt,{tree:e})})},"marker-".concat(e.id))}))]})}var Qt=c.a.memo(Vt);function Kt(e){var t=e.formData,r=e.onCoordinatesChange,c=e.onMapCoordinatesChange,o=rt(),s=Object(a.useRef)(!1),i=Object(a.useState)(!0),u=Object(et.a)(i,2),l=u[0],d=u[1],p=function(e){r(e.target)},j=Object(a.useRef)(null);Object(a.useEffect)((function(){l&&j.current&&s.current?j.current.scrollIntoView({behavior:"smooth"}):s.current=!0}),[l]);return Object(n.jsxs)("div",{children:[Object(n.jsxs)(Ne.a,{item:!0,container:!0,ref:j,children:[Object(n.jsx)(Ne.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(tt.a,{id:"lat",name:"lat",label:"Latitude",type:"number",inputProps:{step:"any",min:-90,max:90},fullWidth:!0,InputLabelProps:{shrink:!0},placeholder:"-90 to 90 (eg. 48.10045)",onChange:p,value:t.lat,required:!0})}),Object(n.jsx)(Ne.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(tt.a,{id:"lng",name:"lng",label:"Longitude",type:"number",inputProps:{step:"any",min:-180,max:180},fullWidth:!0,InputLabelProps:{shrink:!0},placeholder:"-180 to 180 (eg. -123.45316)",onChange:p,value:t.lng,required:!0})})]}),Object(n.jsx)(Qe.a,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:function(){d(!l)},children:l?Object(n.jsx)(Le.a,{children:"Hide Map"}):Object(n.jsx)(Le.a,{children:"Select Via Map"})}),Object(n.jsx)("div",{className:o.mapContainer,style:l?{}:{display:"none"},children:Object(n.jsx)(Qt,{onMapCoordinatesChange:c,useGetClickCoordinates:!0})})]})}var Xt=c.a.memo(Kt);var Jt=function(e){var t=e.submitFormData,r=rt(),c=Object(u.c)((function(e){return e.auth.error})),o=Object(a.useState)({username:"",email:"",password:"",img_url:""}),s=Object(et.a)(o,2),i=s[0],l=s[1],d=function(e){var t=e.target,r=t.name,n=t.value;l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},r,n))}))},p=function(e){return $e(e,c)};return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i)},className:r.form,children:[Object(n.jsx)(tt.a,{id:"username",name:"username",label:"Username",onChange:d,value:i.username,autoComplete:"username",required:!0,inputProps:{minLength:1,maxLength:55},error:Boolean(p("username")),helperText:p("username")}),Object(n.jsx)(tt.a,{id:"email",name:"email",label:"Email",type:"email",onChange:d,value:i.email,autoComplete:"email",required:!0,inputProps:{minLength:6,maxLength:60},error:Boolean(p("email")),helperText:p("email")}),Object(n.jsx)(tt.a,{id:"password",name:"password",label:"Password",type:"password",onChange:d,value:i.password,autoComplete:"password",required:!0,inputProps:{minLength:6},error:Boolean(p("password")),helperText:p("password")}),Object(n.jsx)(Qe.a,{variant:"contained",color:"secondary",type:"submit",children:"Sign Up"})]})},Yt=Object(We.a)({innerContent:{padding:20},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var Zt=function(){var e=Yt(),t=Object(Ge.a)(),r=Object(De.g)(),c=Object(u.b)(),o=Object(u.c)((function(e){return e.auth.authenticated})),s=Object(u.c)((function(e){return e.currUser.username}));return Object(a.useEffect)((function(){o&&r.push("/users/".concat(s))}),[o,s]),Object(n.jsx)(Ne.a,{container:!0,className:e.innerContent,children:Object(n.jsxs)(Ne.a,{item:!0,xs:12,children:[Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:"Sign Up"}),Object(n.jsxs)(Le.a,{gutterBottom:!0,children:["Already have an account? Sign in"," ",Object(n.jsx)(Ze.a,{component:je.b,to:"/signin",style:{color:t.palette.primary.light},children:"here"}),"."]}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(Jt,{submitFormData:function(e){var t={email:e.email,password:e.password},r=Object(v.a)({},e);delete r.password,c(function(e,t){return console.log("Auth - signUpUser - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){var a,c,o;return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:L}),r.prev=1,r.next=4,xe(e.email,e.password);case 4:return a=r.sent,r.next=7,Ae.registerUser(Object(v.a)(Object(v.a)({},t),{},{firebase_id:a.user.uid}));case 7:return c=r.sent,r.next=10,we({displayName:c.username});case 10:o=Object(v.a)(Object(v.a)({},c),{},{token:a.user.refreshToken}),n(Ie({token:a.user.refreshToken})),n(Pe(o)),n({type:W}),r.next=21;break;case 16:r.prev=16,r.t0=r.catch(1),console.log("signUpUser error",r.t0),n(Me(r.t0)),n({type:q});case 21:case"end":return r.stop()}}),r,null,[[1,16]])})));return function(e){return r.apply(this,arguments)}}()}(t,r))}})})]})})};var $t=function(e){var t=e.submitFormData,r=rt(),c=Object(u.c)((function(e){return e.auth.error})),o=Object(a.useState)({email:"",password:""}),s=Object(et.a)(o,2),i=s[0],l=s[1],d=function(e){var t=e.target,r=t.name,n=t.value;l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},r,n))}))},p=function(e){return $e(e,c)};return Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i)},className:r.form,children:[Object(n.jsx)(tt.a,{id:"email",name:"email",label:"Email",type:"email",onChange:d,value:i.email,autoComplete:"email",required:!0,inputProps:{minLength:6,maxLength:60},error:Boolean(p("email")),helperText:p("email")}),Object(n.jsx)(tt.a,{id:"password",name:"password",label:"Password",type:"password",onChange:d,value:i.password,autoComplete:"password",required:!0,error:Boolean(p("password")),helperText:p("password")}),Object(n.jsx)(Qe.a,{color:"secondary",variant:"contained",type:"submit",children:"Sign In"})]})},er=Object(We.a)({innerContent:{padding:20},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var tr=function(){console.log("SignIn Component - Start");var e=er(),t=Object(Ge.a)(),r=Object(u.b)(),c=Object(De.g)(),o=Object(u.c)((function(e){return e.auth.authenticated})),s=Object(u.c)((function(e){return e.currUser.username})),i=Object(u.c)((function(e){return e.currUser.status}));return Object(a.useEffect)((function(){(o&&"idle"===i||"successful"===i)&&c.push("/users/".concat(s))}),[o,s,c,i]),Object(n.jsx)(Ne.a,{container:!0,className:e.innerContent,children:Object(n.jsxs)(Ne.a,{item:!0,xs:12,children:[Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:"Sign In"}),Object(n.jsxs)(Le.a,{gutterBottom:!0,children:["Don't have an account? Sign up"," ",Object(n.jsx)(Ze.a,{component:je.b,to:"/signup",style:{color:t.palette.primary.light},children:"here"})," ",", or browse the publically available trees and groups."]}),Object(n.jsx)($t,{submitFormData:function(e){var t;r((t=e,console.log("Auth - signInUser",t),function(){var e=Object(he.a)(me.a.mark((function e(r){var n,a,c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:L}),e.prev=1,e.next=4,ve(t.email,t.password);case 4:return n=e.sent,e.next=7,Ae.getUser(n.user.displayName);case 7:a=e.sent,c=Object(v.a)(Object(v.a)({},a),{},{token:n.user.refreshToken}),r(Ie({token:n.user.refreshToken})),r(Pe(c)),r({type:W}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),console.log("signInUser error",e.t0),r(Me(e.t0)),r({type:q});case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}()))}})]})})},rr=Object(We.a)({innerContent:{padding:20},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var nr=function(){var e=rr(),t=Object(De.g)(),r=Object(u.b)(),c=Object(u.c)((function(e){return e.currUser})),o=c.username,s=c.error,i=Object(u.c)((function(e){return e.currUser.status})),l=Object(a.useState)({current_email:"",current_password:"",username:"",new_email:"",new_password:"",img_url:""}),d=Object(et.a)(l,2),p=d[0],j=d[1];"success"===i&&t.push("/users/".concat(o));var b=function(e){var t=e.target,r=t.name,n=t.value;j((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},r,n))}))},m=function(e){return $e(e,s)};return Object(n.jsxs)(Ne.a,{container:!0,className:e.innerContent,direction:"column",children:[Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:"Edit User"})}),Object(n.jsx)(Be.a,{variant:"middle",style:{marginBottom:15}}),Object(n.jsx)(Ne.a,{container:!0,item:!0,xs:12,children:Object(n.jsx)(Ne.a,{container:!0,direction:"column",item:!0,xs:12,children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:p.current_email,password:p.current_password},n={username:p.username,img_url:p.img_url,email:p.new_email,password:p.new_password};for(var a in n)""===n[a]&&delete n[a];console.log("Edit User - handleSumbit - userData",n),r(function(e,t,r){return console.log("currUser - editCurrUser - Start",e,t,r),function(){var n=Object(he.a)(me.a.mark((function n(a){var c;return me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:L}),n.prev=1,n.next=4,ke(e);case 4:return n.next=6,Ae.updateUser(t,r);case 6:if(c=n.sent,!r.email){n.next=10;break}return n.next=10,ke({email:r.email,password:e.password});case 10:a(kt(c)),console.log("currUser - editCurrUser - success",c),a({type:W}),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(1),console.log("currUser - editCurrUser error",n.t0),a(Ct(n.t0)),a({type:q});case 20:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(e){return n.apply(this,arguments)}}()}(t,o,n))},className:e.form,children:[Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(Le.a,{children:"Any fields left blank will be ignored."})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(tt.a,{fullWidth:!0,id:"username",name:"username",label:"New Username",onChange:b,value:p.username,inputProps:{maxLength:55},error:Boolean(m("username")),helperText:m("username")})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(tt.a,{fullWidth:!0,id:"new_email",name:"new_email",label:"New Email",type:"email",onChange:b,value:p.new_email,autoComplete:"email",error:Boolean(m("email")),helperText:m("email")})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(tt.a,{fullWidth:!0,id:"new_password",name:"new_password",label:"New Password",type:"password",onChange:b,value:p.new_password,inputProps:{minLength:6},error:Boolean(m("new_password")),helperText:m("new_password")})}),Object(n.jsxs)(Ne.a,{item:!0,children:[Object(n.jsx)(Le.a,{variant:"subtitle2",children:"Verify Account"}),Object(n.jsx)(tt.a,{fullWidth:!0,id:"current_password",name:"current_password",label:"Current Password",type:"password",onChange:b,value:p.current_password,inputProps:{minLength:6},error:Boolean(m("password")),helperText:m("password")})]}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,justify:"space-between",style:{paddingLeft:40,paddingRight:40},children:[Object(n.jsx)(Qe.a,{onClick:function(){t.push("/users/".concat(o))},variant:"contained",color:"secondary",children:"Go Back"}),Object(n.jsx)(Qe.a,{variant:"contained",color:"primary",type:"submit",children:"Save Edits"})]})]})})})]})},ar=r(192),cr=r(271),or=r(85),sr=r(326),ir=Object(We.a)((function(e){return{imgPreview:{height:100,width:"auto"},imgsContainer:{"& .selected":{backgroundColor:e.palette.primary.accent}},imgPaper:{justifyContent:"center",alignItems:"center",padding:4,paddingBottom:0}}}));function ur(e){var t=e.allowMultiple,r=void 0===t||t,c=e.onImageFilesChange,o=Object(Ge.a)(),s=ir(o),i=Object(a.useState)([]),u=Object(et.a)(i,2),l=u[0],d=u[1],p=Object(a.useState)([]),j=Object(et.a)(p,2),b=j[0],m=j[1];Object(a.useEffect)((function(){console.log("useEffect fileList",b),c(b)}),[b,c]);var h=function(e){var t=new FileReader;return new Promise((function(r,n){t.onerror=function(){t.abort(),n(new DOMException("Problem parsing input file."))},t.onload=function(){r(t.result)},t.readAsDataURL(e)}))},O=function(){var e=Object(he.a)(me.a.mark((function e(t){var r,n,a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("getImageUrlsFromFiles",t),r=[],n=0;case 3:if(!(n<t.length)){e.next=11;break}return e.next=6,h(t[n]);case 6:a=e.sent,r.push(a);case 8:n++,e.next=3;break;case 11:d(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(he.a)(me.a.mark((function e(t){var r,n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.target.files,n=Array.from(r),console.log("filesArr",n),O(r),m((function(e){return n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.currentTarget.children[0].src,r=l.findIndex((function(e){return e===t}));console.log("handlePrimaryChange idx",r),d((function(e){var r=e.filter((function(e){return e!==t}));return r.unshift(t),r})),console.log("handlePrimaryChange fileList",b),m((function(e){return[e[r]].concat(Object(ne.a)(e.slice(0,r)),Object(ne.a)(e.slice(r+1)))})),console.log("handlePrimaryChange fileList post",b)};return Object(n.jsxs)(Ne.a,{container:!0,className:"ImagesInput",children:[Object(n.jsxs)(Ne.a,{item:!0,children:[Object(n.jsx)(sr.a,{accept:"image/*",style:{display:"none"},id:"file-upload",type:"file",inputProps:{multiple:r},onChange:f}),Object(n.jsx)(Qe.a,{variant:"outlined",color:"primary",htmlFor:"file-upload",component:"label",children:r?"Choose Images":"Choose Image"}),r&&Object(n.jsx)(Le.a,{children:"If selecting multiple images, click the one you want to be the primary image."})]}),Object(n.jsx)(Ne.a,{container:!0,item:!0,xs:12,justify:"center",className:s.imgsContainer,children:l.map((function(e,t){return Object(n.jsx)(ht.a,{mr:1,children:Object(n.jsx)(Ve.a,{elevation:3,onClick:g,className:l[0]===e?"".concat(s.imgPaper," selected"):s.imgPaper,children:Object(n.jsx)("img",{className:s.imgPreview,src:e})})},e)}))})]})}var lr=c.a.memo(ur);var dr=function(e){var t=e.edit,r=void 0!==t&&t,a=e.formData,c=e.onFormChange,o=rt(),s=function(e){c(e.target)};return Object(n.jsxs)(Ne.a,{container:!0,className:o.form,children:[Object(n.jsx)(tt.a,{id:"name",name:"name",label:"Tree Name",placeholder:"Hyperion",onChange:s,value:a.name,required:!r}),Object(n.jsx)(tt.a,{id:"description",name:"description",label:"Description",multiline:!0,placeholder:"World's tallest known living tree!",onChange:s,value:a.description}),Object(n.jsx)(tt.a,{id:"common_name",name:"common_name",label:"Species Common Name",placeholder:"Bigleaf Maple",onChange:s,value:a.common_name}),Object(n.jsx)(tt.a,{id:"scientific_name",name:"scientific_name",label:"Species Scientifc Name",placeholder:"Acer Macrophyllum",onChange:s,value:a.scientific_name}),Object(n.jsx)(tt.a,{id:"height",name:"height",label:"Height (ft.)",type:"number",placeholder:"From base to the tallest branch.",inputProps:{min:0,max:500,step:.01},onChange:s,value:a.height}),Object(n.jsx)(tt.a,{id:"dsh",name:"dsh",label:"Diameter Standard Height (in.)",type:"number",inputProps:{min:0,max:500,step:.01},placeholder:"Trunk circumference 4.5ft above the ground.",onChange:s,value:a.dsh}),Object(n.jsxs)(tt.a,{id:"leaf_type",name:"leaf_type",label:"Leaf Type",select:!0,onChange:s,value:a.leaf_type,children:[Object(n.jsx)(or.a,{value:"",children:"Unknown"}),Object(n.jsx)(or.a,{value:"deciduous",children:"Deciduous"}),Object(n.jsx)(or.a,{value:"evergreen",children:"Evergreen"})]}),Object(n.jsx)(cr.a,{control:Object(n.jsx)(ar.a,{id:"fruit_bearing",name:"fruit_bearing",onChange:s,checked:a.fruit_bearing,color:"primary"}),label:"Fruit Bearing? Consider adding what type of fruit to the description!"})]})};function pr(e,t){return console.log("Actions - createTree tree",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){var a;return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:T}),r.prev=1,r.next=4,Ae.createTree(e);case 4:return a=r.sent,console.log("Actions - createTree res",a),r.next=8,Ft(Mt,a.id,t);case 8:return n(Or(a)),n({type:_}),r.abrupt("return",a.id);case 13:return r.prev=13,r.t0=r.catch(1),console.log("Actions - createTree err",r.t0),n(gr(r.t0)),n({type:S}),r.abrupt("return",!1);case 19:case"end":return r.stop()}}),r,null,[[1,13]])})));return function(e){return r.apply(this,arguments)}}()}function jr(e){return function(){var t=Object(he.a)(me.a.mark((function t(r){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:T}),t.prev=1,t.next=4,Ae.getTree(e);case 4:n=t.sent,console.log("Actions - getTree res",n),r(Or(n)),r({type:_}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Actions - getTree err",t.t0),r(gr(t.t0)),r({type:S});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}function br(e){return function(){var t=Object(he.a)(me.a.mark((function t(r){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:T}),t.prev=1,t.next=4,Ae.getTrees(e);case 4:n=t.sent,console.log("Actions - getTrees res",n),r({type:w,payload:n}),r({type:_}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Actions - getTrees err",t.t0),r(gr(t.t0)),r({type:S});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}function mr(e,t,r){return function(){var n=Object(he.a)(me.a.mark((function n(a){var c;return me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:T}),n.prev=1,n.next=4,Ae.updateTree(e,t);case 4:if(c=n.sent,console.log("Actions - updateTree res",c),!(r.length>0)){n.next=12;break}return console.log("Actions - updateTree - imagesFiles",r),n.next=10,Wt(Mt,e);case 10:return n.next=12,Ft(Mt,e,r);case 12:a(Or(c)),a({type:_}),n.next=21;break;case 16:n.prev=16,n.t0=n.catch(1),console.log("Actions - updateTree err",n.t0),a(gr(n.t0)),a({type:S});case 21:case"end":return n.stop()}}),n,null,[[1,16]])})));return function(e){return n.apply(this,arguments)}}()}function hr(e){return console.log("Actions - deleteTree - start",e),function(){var t=Object(he.a)(me.a.mark((function t(r){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:T}),t.prev=1,t.next=4,Ae.deleteTree(e);case 4:return n=t.sent,console.log("Actions - deleteTree res",n),t.next=8,Wt(Mt,e);case 8:return t.next=10,r(fr(e));case 10:return t.next=12,r({type:_});case 12:return t.abrupt("return",!0);case 15:return t.prev=15,t.t0=t.catch(1),console.log("Actions - deleteTree err",t.t0),r(gr(t.t0)),r({type:S}),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()}function Or(e){return{type:y,payload:e}}function fr(e){return{type:k,payload:e}}function gr(e){return{type:C,payload:e}}var xr=Object(We.a)({innerContent:{padding:20,backgroundColor:"white"},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var vr=function(){var e=Object(De.g)(),t=Object(u.b)(),r=Object(u.c)((function(e){return e.currUser.uid})),c=xr(),o=Object(a.useState)({name:"",description:"",common_name:"",scientific_name:"",height:"",dsh:"",leaf_type:"",fruit_bearing:!1}),s=Object(et.a)(o,2),i=s[0],l=s[1],d=Object(a.useState)({lat:"",lng:""}),p=Object(et.a)(d,2),j=p[0],b=p[1],m=Object(a.useState)([]),h=Object(et.a)(m,2),O=h[0],f=h[1];console.log("CreateNewTree Load - coordinates",j),console.log("CreateNewTree Load - imageFiles",O);var g=function(){var n=Object(he.a)(me.a.mark((function n(a){var c,o,s;return me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o in a.preventDefault(),c=Object(v.a)(Object(v.a)({},i),{},{geolocation:{latitude:parseFloat(j.lat),longitude:parseFloat(j.lng)}}))""===c[o]?delete c[o]:"height"!==o&&"dsh"!==o||(c[o]=parseFloat(c[o]));return console.log("CreateNewTree",c),n.next=6,t(pr(c,O));case 6:s=n.sent,t(xt(r,s)),s&&(console.log("CreateNewTree - treeId",s),e.push("/trees/".concat(s)));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:c.innerContent,children:[Object(n.jsx)(Le.a,{variant:"h4",gutterBottom:!0,children:"Create New Tree"}),Object(n.jsxs)("form",{onSubmit:g,className:c.form,children:[Object(n.jsx)(dr,{formData:i,onFormChange:function(e){var t=e.name,r=e.value;"fruit_bearing"===t&&(r=e.checked),l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))}}),Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"Tree Location"}),Object(n.jsx)(Xt,{formData:j,onCoordinatesChange:function(e){console.log("CreateNewTree - handleCoordinatesChange",e);var t=e.name,r=e.value;b((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))},onMapCoordinatesChange:function(e){console.log("CreateNewTree - handleMapCoordinatesChange",e),b(e)}}),Object(n.jsx)(Be.a,{variant:"middle",style:{marginTop:15,marginBottom:15}}),Object(n.jsxs)("div",{children:[Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"Add Images"}),Object(n.jsx)(lr,{onImageFilesChange:function(e){f(e)}}),Object(n.jsx)(Be.a,{variant:"middle",style:{marginBottom:15}})]}),Object(n.jsx)(Qe.a,{color:"secondary",variant:"contained",type:"submit",children:"Create Tree"})]})]})},yr=r.p+"static/media/not-found-page.b8048e53.jpg",wr=Object(We.a)((function(e){return{backgroundImage:Object(x.a)({backgroundImage:"url(".concat(yr,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"black",height:"calc(100vh - ".concat(e.mixins.toolbar.minHeight,"px)")},e.breakpoints.up("md"),{height:"calc(100vh - 64px)"})}}));var kr=function(){var e=Object(Ge.a)(),t=wr(e);return Object(n.jsx)(Ne.a,{container:!0,className:t.backgroundImage,alignItems:"center",children:Object(n.jsxs)(Ne.a,{container:!0,item:!0,justify:"center",direction:"column",style:{backgroundColor:"rgba(0,0,0,.5)",paddingBottom:10},children:[Object(n.jsx)(Le.a,{align:"center",variant:"h1",style:{color:"white",fontWeight:"bold"},gutterBottom:!0,children:"Page Not Found"}),Object(n.jsxs)(Le.a,{align:"center",variant:"h5",style:{color:"white"},children:["Did you get lost in the woods? Head back"," ",Object(n.jsx)(Ze.a,{component:je.b,to:"/",style:{color:e.palette.primary.accent},children:"home"}),"."]})]})})},Cr=r(333),Tr=r(359),_r=r(334);var Sr=function(e){var t=e.mapCenter,r=e.setCenterOnUser,c=rt(),o=Object(u.b)();console.log("TreeSearchForm - mapCenter",t);var s=Object(a.useState)({search:"",distance:"",leaf_type:"",fruit_bearing:!1,height_min:"",height_max:"",dsh_min:"",dsh_max:""}),i=Object(et.a)(s,2),l=i[0],d=i[1],p=function(e){var t=e.target.name,r="fruit_bearing"===t?e.target.checked:e.target.value;d((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))};return Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault(),d(l);var r={search:l.search,distance:parseFloat(l.distance)||"",map_center_x:t[1],map_center_y:t[0],leaf_type:l.leaf_type,fruit_bearing:l.fruit_bearing||"",height_min:parseFloat(l.height_min)||"",height_max:parseFloat(l.height_max)||"",dsh_min:parseFloat(l.dsh_min)||"",dsh_max:parseFloat(l.dsh_max)||""};for(var n in r)""===r[n]&&delete r[n];console.log("Searchparams",r),o(br(r))},className:c.form,children:Object(n.jsxs)(Ne.a,{container:!0,children:[Object(n.jsx)(Ne.a,{item:!0,xs:12,className:c.form,children:Object(n.jsx)(tt.a,{id:"search",name:"search",label:"Search Term",placeholder:"Search Tree Name, Common Name, Scientific Name...",onChange:p,value:l.search})}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,children:[Object(n.jsxs)(Ne.a,{item:!0,xs:6,children:[Object(n.jsx)(Le.a,{variant:"subtitle1",children:"Height (ft.)"}),Object(n.jsx)(tt.a,{id:"height_min",name:"height_min",label:"Min",type:"number",inputProps:{min:0,max:500,step:.01},onChange:p,value:l.height_min}),Object(n.jsx)(tt.a,{id:"height_max",name:"height_max",label:"Max",type:"number",inputProps:{min:1,max:500,step:.01},onChange:p,value:l.height_max})]}),Object(n.jsxs)(Ne.a,{item:!0,xs:6,children:[Object(n.jsx)(Le.a,{variant:"subtitle1",children:"DSH (in.)"}),Object(n.jsx)(tt.a,{id:"dsh_min",name:"dsh_min",label:"Min",type:"number",inputProps:{min:0,max:500,step:.01},onChange:p,value:l.dsh_min}),Object(n.jsx)(tt.a,{id:"dsh_max",name:"dsh_max",label:"Max",type:"number",inputProps:{min:1,max:500,step:.01},onChange:p,value:l.dsh_max})]})]}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,children:[Object(n.jsx)(Ne.a,{item:!0,xs:6,md:12,children:Object(n.jsxs)(tt.a,{id:"leaf_type",name:"leaf_type",label:"Leaf Type",select:!0,onChange:p,value:l.leaf_type,fullWidth:!0,children:[Object(n.jsx)(or.a,{value:"",children:"Any"}),Object(n.jsx)(or.a,{value:"deciduous",children:"Deciduous"}),Object(n.jsx)(or.a,{value:"evergreen",children:"Evergreen"})]})}),Object(n.jsx)(Ne.a,{item:!0,xs:6,md:12,children:Object(n.jsx)(cr.a,{control:Object(n.jsx)(ar.a,{id:"fruit_bearing",name:"fruit_bearing",onChange:p,checked:l.fruit_bearing,color:"primary"}),label:"Fruit Bearing",labelPlacement:"top"})})]}),Object(n.jsxs)(Ne.a,{container:!0,alignItems:"center",item:!0,xs:12,children:[Object(n.jsx)(Ne.a,{item:!0,md:8,children:Object(n.jsx)(tt.a,{id:"distance",name:"distance",label:"Miles from Map Center to Show Trees",type:"number",fullWidth:!0,inputProps:{min:0,step:1},onChange:p,value:l.distance})}),Object(n.jsx)(Ne.a,{container:!0,justify:"center",item:!0,md:4,children:Object(n.jsx)(Ot.a,{title:"Requires user location permission",children:Object(n.jsx)(Qe.a,{size:"small",color:"primary",variant:"contained",onClick:function(){console.log("handleCenterMapOnUser - click"),r(!0)},children:"Center on Me"})})})]}),Object(n.jsx)(Qe.a,{fullWidth:!0,variant:"outlined",color:"secondary",type:"submit",children:"Search"})]})})},Er=r(121),Rr=r(331),Ar=r(332);function Ur(e,t){return console.log("Actions - createGroup group",e),function(){var r=Object(he.a)(me.a.mark((function r(n){var a;return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.createGroup(e);case 4:return a=r.sent,r.next=7,Ft(Pt,a.id,t);case 7:return n(Fr(a)),n({type:D}),r.abrupt("return",a.id);case 12:return r.prev=12,r.t0=r.catch(1),console.log("Actions - createGroup err",r.t0),n(Lr(r.t0)),n({type:N}),r.abrupt("return",!1);case 18:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(e){return r.apply(this,arguments)}}()}function Ir(e){return console.log("Actions - getGroup group",e),function(){var t=Object(he.a)(me.a.mark((function t(r){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:G}),t.prev=1,t.next=4,Ae.getGroup(e);case 4:n=t.sent,r(Fr(n)),r({type:D}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("Actions - getGroup err",t.t0),r(Lr(t.t0)),r({type:N});case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}function Mr(e){return function(){var t=Object(he.a)(me.a.mark((function t(r){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:G}),t.prev=1,t.next=4,Ae.getGroups(e);case 4:n=t.sent,console.log("Actions - getGroups res",n),r({type:A,payload:n}),r({type:D}),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Actions - getGroups err",t.t0),r(Lr(t.t0)),r({type:N});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}function Pr(e,t){return function(){var r=Object(he.a)(me.a.mark((function r(n){var a;return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.updateGroup(e,t);case 4:return a=r.sent,console.log("Actions - updateGroup res",a),n(Fr(a)),n({type:D}),r.abrupt("return",!0);case 11:return r.prev=11,r.t0=r.catch(1),console.log("Actions - updateGroup err",r.t0),n(Lr(r.t0)),n({type:N}),r.abrupt("return",!1);case 17:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e){return r.apply(this,arguments)}}()}function Gr(e){return console.log("Actions - deleteGroup - start",e),function(){var t=Object(he.a)(me.a.mark((function t(r){var n;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:G}),t.prev=1,t.next=4,Ae.deleteGroup(e);case 4:return n=t.sent,t.next=7,Wt(Pt,e);case 7:return console.log("Actions - deleteGroup res",n),r(Br(e)),r({type:D}),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(1),console.log("Actions - deleteGroup err",t.t0),r(Lr(t.t0)),r({type:N}),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}function Dr(e,t){return console.log("Actions - addTreeToGroup - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.groupAddTree(e,t);case 4:n({type:U,payload:{groupId:e,treeId:t}}),n({type:D}),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("Actions - addTreeToGroup error",r.t0),n(Lr(r.t0)),n({type:N});case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function Nr(e,t){return console.log("Actions  - removeTreeFromGroup - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.groupRemoveTree(e,t);case 4:n({type:I,payload:{groupId:e,treeId:t}}),n({type:D}),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("Actions - removeTreeFromGroup error",r.t0),n(Lr(r.t0)),n({type:N});case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}function Fr(e){return{type:E,payload:e}}function Br(e){return{type:R,payload:e}}function Lr(e){return{type:P,payload:e}}var Wr=function(e){var t=e.group,r=e.treeId,c=Object(Ge.a)(),o=Object(a.useState)(null),s=Object(et.a)(o,2),i=s[0],l=s[1],d=Object(u.b)();Object(a.useEffect)((function(){!function(e,t){l(e.trees.includes(t))}(t,r)}),[t,r]);var p=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(i?Nr(t.id,r):Dr(t.id,r)),l(!i);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(Ot.a,{title:i?"Remove Tree":"Add Tree",children:Object(n.jsx)(dt.a,{onClick:p,children:i?Object(n.jsx)(Rr.a,{htmlColor:c.palette.primary.light}):Object(n.jsx)(Ar.a,{htmlColor:c.palette.primary.light})})})},qr=Object(We.a)((function(e){return{treeListContainer:{backgroundColor:e.palette.background.paper,"& .data-grid-fav-header":{"& .MuiDataGrid-colCellTitleContainer":{alignItems:"center"}},display:"flex",height:"100%"}}}));function zr(e){return Object(n.jsx)(Qe.a,Object(v.a)(Object(v.a)({color:"primary",component:je.b},e),{},{children:"Show"}))}var Hr=function(e,t){return e.includes(t)};var Vr=function(e){var t,r=e.trees,a=e.group,c=void 0===a?null:a,o=qr(),s=(Object(u.b)(),Object(u.c)((function(e){return e.currUser}))),i=s.username,l=s.savedTreeIds;console.log("TreeList - trees",r),c?c&&(t=r.map((function(e){return Object(v.a)(Object(v.a)({treeInGroup:{id:e.id,treeInGroup:Hr(c.trees,e.id)}},e),{},{link:"trees/".concat(e.id)})}))):t=r.map((function(e){return Object(v.a)(Object(v.a)({isFavTree:{id:e.id,isFav:Hr(l,e.id)}},e),{},{link:"trees/".concat(e.id)})}));var d=[!c&&{field:"isFavTree",renderHeader:function(e){return Object(n.jsx)(gt.a,{})},headerClassName:"data-grid-fav-header",headerAlign:"center",renderCell:function(e){return Object(n.jsx)(Rt,{treeId:parseInt(e.value.id)})},sortComparator:function(e,t,r,n){return e.isFav===t.isFav?0:e.isFav?-1:1}},null!==c&&{field:"treeInGroup",headerName:"Add Tree",headerClassName:"data-grid-tree-in-group-header",headerAlign:"center",width:120,renderCell:function(e){return Object(n.jsx)(Wr,{group:c,treeId:parseInt(e.value.id)})},sortComparator:function(e,t,r,n){return e.treeInGroup===t.treeInGroup?0:e.treeInGroup?-1:1}},{field:"name",headerName:"Name",width:150},{field:"common_name",headerName:"Common Name"},{field:"scientific_name",headerName:"Scientific Name"},{field:"height",headerName:"Ht. (ft.)",type:"number"},{field:"dsh",headerName:"DBH (in.)",type:"number"},{field:"fruit_bearing",headerName:"Fruit Bearing",valueFormatter:function(e){return!0===e.value?"Yes":" "}},{field:"leaf_type",headerName:"Leaf Type"},{field:"link",headerName:"Details",renderCell:function(e){return Object(n.jsx)(zr,{to:e.value})}}];return i||d.shift(),Object(n.jsx)("div",{className:o.treeListContainer,children:Object(n.jsx)("div",{style:{flexGrow:1},children:Object(n.jsx)(Er.a,{rows:t,columns:d,pageSize:10,autoHeight:!0})})})};function Qr(e){var t=e.children,r=e.value,a=e.index,c=Object(f.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(v.a)(Object(v.a)({role:"tabpanel",hidden:r!==a,id:"map-list-tabpanel-".concat(a),"aria-labelledby":"map-list-tab-".concat(a)},c),{},{children:r===a&&Object(n.jsx)(ht.a,{children:t})}))}function Kr(e){return{id:"map-list-tab-".concat(e),"aria-controls":"map-list-tabpanel-".concat(e)}}var Xr=Object(We.a)((function(e){return{indicator:{backgroundColor:e.palette.secondary.main},innerContent:{backgroundColor:e.palette.background.paper,padding:20}}}));var Jr=function(){var e=Object(Ge.a)(),t=Xr(e),r=Object(u.b)(),c=Object(a.useState)(!0),o=Object(et.a)(c,2),s=o[0],i=o[1],l=Object(a.useState)(0),d=Object(et.a)(l,2),p=d[0],j=d[1],b=Object(a.useState)(!1),m=Object(et.a)(b,2),h=m[0],O=m[1],f=Object(a.useState)([48.09933034129291,-123.42563836030864]),g=Object(et.a)(f,2),x=g[0],y=g[1];Object(a.useEffect)((function(){s&&(r(br()),i(!1))}),[s,r]);var w=Object(u.c)((function(e){return Object.values(e.trees.entities).map((function(e){return e}))}));return s?Object(n.jsx)("div",{children:"Loading"}):Object(n.jsxs)("div",{className:t.innerContent,children:[Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:"Explore Trees"}),Object(n.jsx)(Le.a,{gutterBottom:!0,children:"**DISCLAIMER: Some trees shown may be on private property. Please use your discretion when visiting any given tree."}),Object(n.jsx)(Sr,{mapCenter:x,setCenterOnUser:O}),Object(n.jsx)(Cr.a,{position:"static",color:"default",children:Object(n.jsxs)(Tr.a,{value:p,onChange:function(e,t){j(t)},indicatorColor:"secondary",textColor:"secondary",variant:"fullWidth","aria-label":"map and list view tabs",children:[Object(n.jsx)(_r.a,Object(v.a)({label:"Map"},Kr(0))),Object(n.jsx)(_r.a,Object(v.a)({label:"List"},Kr(1)))]})}),Object(n.jsxs)(Ve.a,{elevation:4,children:[Object(n.jsx)(Qr,{value:p,index:0,children:Object(n.jsx)(Qt,{mapCenter:x,setMapCenter:y,useCenterOnUser:h,setCenterOnUser:O,trees:w})}),Object(n.jsx)(Qr,{value:p,index:1,children:Object(n.jsx)(ht.a,{style:{height:"".concat(120+52*Math.min(w.length,10),"px"),width:"100%"},children:Object(n.jsx)(Vr,{trees:w})})})]})]})};r(241);var Yr=function(){var e=rt(),t=Object(u.b)(),r=Object(a.useState)({search:""}),c=Object(et.a)(r,2),o=c[0],s=c[1];return Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault(),s(o);var r={search:o.search};for(var n in r)""===r[n]&&delete r[n];console.log("Searchparams",r),t(Mr(r))},className:e.form,children:Object(n.jsxs)(Ne.a,{container:!0,children:[Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:"Explore Groups"}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,children:[Object(n.jsx)(Ne.a,{item:!0,xs:!0,children:Object(n.jsx)(tt.a,{id:"search",name:"search",label:"Search Term",placeholder:"Search Group Name...",fullWidth:!0,onChange:function(e){var t=e.target,r=t.name,n=t.value;s((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},r,n))}))},value:o.search})}),Object(n.jsx)(Ne.a,{item:!0,xs:2,children:Object(n.jsx)(Qe.a,{variant:"outlined",color:"secondary",type:"submit",children:"Search"})})]})]})})},Zr=Object(We.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,"& .data-grid-fav-header":{"& .MuiDataGrid-colCellTitleContainer":{alignItems:"center"}}}}}));function $r(e){return Object(n.jsx)(Qe.a,Object(v.a)(Object(v.a)({color:"primary",component:je.b},e),{},{children:"Show"}))}var en=function(e){var t=e.groups,r=Zr(),a=(Object(u.b)(),Object(u.c)((function(e){return e.currUser}))),c=(a.uid,a.username,a.savedGroupIds,t.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{created_at:new Date(e.created_at).toLocaleDateString("en-gb",{year:"numeric",month:"long",day:"numeric"}),link:"groups/".concat(e.id)})}))),o=[{field:"name",headerName:"Name",width:200},{field:"description",headerName:"Description",width:200},{field:"link",headerName:"Details",renderCell:function(e){return Object(n.jsx)($r,{to:e.value})}},{field:"created_at",headerName:"Created",width:150}];return Object(n.jsx)("div",{style:{width:"100%"},className:r.root,children:Object(n.jsx)(Er.a,{rows:c,columns:o,pageSize:10,autoHeight:!0})})},tn=Object(We.a)((function(e){return{innerContent:{backgroundColor:e.palette.background.paper,padding:20}}}));var rn=function(){var e=Object(Ge.a)(),t=tn(e),r=Object(u.b)(),c=Object(a.useState)(!0),o=Object(et.a)(c,2),s=o[0],i=o[1];Object(a.useEffect)((function(){s&&(r(Mr()),i(!1))}),[s,r]);var l=Object(u.c)((function(e){return Object.values(e.groups.entities).map((function(e){return e}))}));return console.log("ExploreGroups - groups",l),s?Object(n.jsx)("div",{children:"Loading"}):Object(n.jsxs)("div",{className:t.innerContent,children:[Object(n.jsx)(Yr,{}),Object(n.jsx)(en,{groups:l})]})},nn=r(341),an=r(342),cn=r(329),on=r(340),sn=r(343),un=r(335),ln=r(336),dn=Object(We.a)({root:{width:"100%",borderRadius:"0px"},media:{height:600,display:"flex",justifyContent:"space-between",alignItems:"center"}});var pn=function(e){var t=e.imageUrls,r=dn(),c=Object(a.useState)(0),o=Object(et.a)(c,2),s=o[0],i=o[1],u=t.length,l=0===s,d=s===u-1;return Object(n.jsx)("div",{className:"Carousel",children:Object(n.jsx)(pt.a,{className:r.root,children:Object(n.jsxs)(mt.a,{className:r.media,image:t[s],children:[l?Object(n.jsx)("div",{}):Object(n.jsx)(dt.a,{onClick:function(){return i(s-1)},children:Object(n.jsx)(un.a,{fontSize:"large",htmlColor:"rgba(255,255,255, 0.9)"})}),d?Object(n.jsx)("div",{}):Object(n.jsx)(dt.a,{onClick:function(){return i(s+1)},children:Object(n.jsx)(ln.a,{fontSize:"large",htmlColor:"rgba(255,255,255, 0.9)"})})]})})})},jn=r(365),bn=r(182),mn=r.n(bn),hn=r(185),On=r(338),fn=r(339),gn=r(337);var xn=function(e){var t=e.type,r=e.id,a=(ft(),Object(De.g)());return Object(n.jsx)(Ot.a,{title:"Edit",children:Object(n.jsx)(dt.a,{onClick:function(){a.push("/".concat(t,"/").concat(r,"/edit"))},children:Object(n.jsx)(gn.a,{})})})},vn=Object(We.a)((function(e){return{avatarOther:{backgroundColor:e.palette.secondary.light},avatarOwn:{backgroundColor:e.palette.primary.light}}}));var yn=function(e){var t=e.onDelete,r=e.username,c=e.comment,o=e.isCreatorOrModerator,s=vn(),i=Object(a.useState)(!1),u=Object(et.a)(i,2),l=u[0],d=u[1],p=Object(a.useState)(c.text),j=Object(et.a)(p,2),b=j[0],m=j[1],h=Object(a.useState)(null),O=Object(et.a)(h,2),f=O[0],g=O[1],x=Boolean(f),v=r===c.author_name,y=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(null),e.next=3,Ae.deleteComment(c.id);case 3:t();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(he.a)(me.a.mark((function e(t){var r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),m(b.trim()),b===c.text){e.next=7;break}return e.next=5,Ae.updateComment(c.id,{text:b});case 5:r=e.sent,c.text=r.text;case 7:d(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(Ne.a,{container:!0,item:!0,wrap:"nowrap",style:{marginBottom:15},children:[Object(n.jsx)(Ne.a,{item:!0,style:{marginRight:15},children:Object(n.jsx)(jn.a,{className:v?s.avatarOwn:s.avatarOther,children:c.author_name[0]})}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,alignItems:"center",children:[l?Object(n.jsxs)(Ne.a,{container:!0,wrap:"nowrap",item:!0,justify:"space-between",children:[Object(n.jsx)(Ne.a,{item:!0,style:{width:"100%"},children:Object(n.jsx)("form",{onSubmit:w,id:"edit-comment",children:Object(n.jsx)(tt.a,{id:"text",onChange:function(e){m(e.target.value)},type:"text",fullWidth:!0,multiline:!0,value:b})})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(dt.a,{form:"edit-comment",type:"submit",children:Object(n.jsx)(On.a,{})})})]}):Object(n.jsxs)(Ne.a,{container:!0,wrap:"nowrap",item:!0,justify:"space-between",children:[Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(Le.a,{style:{whiteSpace:"pre-line"},children:c.text})}),(v||o)&&Object(n.jsxs)(Ne.a,{item:!0,children:[Object(n.jsx)(dt.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){g(e.currentTarget)},children:Object(n.jsx)(fn.a,{fontSize:"small"})}),Object(n.jsxs)(hn.a,{id:"long-menu",anchorEl:f,keepMounted:!0,open:x,onClose:function(){g(null)},children:[v&&Object(n.jsx)(or.a,{onClick:function(){g(null),d(!0)},children:"Edit"}),Object(n.jsx)(or.a,{onClick:y,children:"Delete"})]})]})]}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,justify:"space-between",children:[Object(n.jsxs)(Le.a,{variant:"caption",children:["Posted By: ",c.author_name]}),Object(n.jsx)(Le.a,{variant:"caption",children:new Date(c.created_at).toLocaleDateString("en-gb",{year:"numeric",month:"long",day:"numeric"})})]})]})]})},wn=Object(We.a)((function(e){return{userAvatar:{backgroundColor:e.palette.primary.light}}}));var kn=function(e){var t=e.type,r=e.id,c=e.isCreatorOrModerator;console.log("CommentsContainer - Start",t,r);var o=wn(),s={text:"",type:t,id:r},i=Object(a.useState)(s),l=Object(et.a)(i,2),d=l[0],p=l[1],j=Object(a.useState)(!0),b=Object(et.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)(!1),f=Object(et.a)(O,2),g=f[0],y=f[1],w=Object(a.useState)([]),k=Object(et.a)(w,2),C=k[0],T=k[1],_=Object(u.c)((function(e){return e.currUser.username}));Object(a.useEffect)((function(){(function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae.getComments(t,r);case 2:n=e.sent,T(n),h(!1),y(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}})()(t,r)}),[m,t,r,g]);var S=function(){y(!0)},E=function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Ae.createComment(d);case 3:p(s),h(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)(Ne.a,{container:!0,className:"CommentsContainer",children:[Object(n.jsx)(Le.a,{variant:"h4",children:"Comments"}),Object(n.jsx)(Ne.a,{container:!0,item:!0,xs:12,children:Object(n.jsx)(ht.a,{mt:2,mb:2,style:{width:"100%"},children:C.length>0?C.map((function(e){return Object(n.jsx)(yn,{onDelete:S,comment:e,username:_,isCreatorOrModerator:c},"comment-".concat(e.id))})):Object(n.jsx)(Le.a,{children:"No Comments"})})}),_?Object(n.jsx)(Ne.a,{container:!0,item:!0,children:Object(n.jsxs)(Ne.a,{container:!0,alignItems:"center",spacing:2,item:!0,xs:12,wrap:"nowrap",children:[Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(jn.a,{className:o.userAvatar,children:_[0]})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)("form",{id:"comment",onSubmit:E,children:Object(n.jsx)(tt.a,{id:"text",name:"text",placeholder:"Add comment...",fullWidth:!0,onChange:function(e){var t=e.target,r=t.name,n=t.value;p((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},r,n))}))},value:d.text})})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(dt.a,{form:"comment",type:"submit",children:Object(n.jsx)(mn.a,{})})})]})}):Object(n.jsxs)(Le.a,{children:[Object(n.jsx)(Ze.a,{component:je.b,to:"/signup",children:"Sign Up"})," ","or"," ",Object(n.jsx)(Ze.a,{component:je.b,to:"/signin",children:"Sign In"})," ","to add comments."]})]})},Cn=Object(We.a)({innerContent:{padding:20},tableContainer:{marginRight:10}});var Tn=function(){console.log("TreePage - start");var e=Cn(),t=Object(De.h)().id,r=Object(u.c)((function(e){return e.trees.entities[t]})),c=Object(u.c)((function(e){return e.currUser.uid})),o=r.creator===c,s=Object(a.useState)(!0),i=Object(et.a)(s,2),l=i[0],d=i[1],p=Object(a.useState)({primary:"",album:[]}),j=Object(et.a)(p,2),b=j[0],m=j[1],h=Object(u.b)();if(Object(a.useEffect)((function(){console.log("TreePage UseEffect tree - Start"),r||function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(jr(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t)}),[r,t,h]),Object(a.useEffect)((function(){console.log("TreePage UseEffect Images - Start"),l&&function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(t,r);case 2:n=e.sent,console.log("TreePage UseEffect - ",n),n&&m(n),d(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(Mt,t)}),[l,t]),l)return Object(n.jsx)("div",{children:"Loading"});var O=[{field:"common_name",label:"Common Name",value:r.common_name},{field:"scientific_name",label:"Scientific Name",value:r.scientifc_name&&Object(n.jsx)("i",{children:r.scientific_name})},{field:"height",label:"Height (ft.)",value:r.height},{field:"dsh",label:"DSH (in.)",value:r.dsh},{field:"leaf_type",label:"Leaf Type",value:r.leaf_type},{field:"fruit_bearing",label:"Fruit Bearing",value:r.fruit_bearing&&"Yes"},{field:"geolocation",label:"Coordinates",value:"(".concat(r.geolocation.y,", ").concat(r.geolocation.x,")")}];return Object(n.jsxs)(Ne.a,{container:!0,direction:"column",children:[Object(n.jsx)(Ne.a,{item:!0,xs:12,children:function(e){return""===e.primary?null:Object(n.jsx)(pn,{imageUrls:[e.primary].concat(Object(ne.a)(e.album))})}(b)}),Object(n.jsxs)(Ne.a,{className:e.innerContent,container:!0,item:!0,xs:12,alignItems:"flex-start",children:[Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,children:[Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,wrap:"nowrap",children:[Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:r.name}),Object(n.jsxs)(Ne.a,{item:!0,children:[Object(n.jsx)(Rt,{treeId:r.id}),c===r.creator&&Object(n.jsx)(xn,{type:"trees",id:r.id})]})]}),r.description&&Object(n.jsx)(Ne.a,{item:!0,xs:12,children:Object(n.jsx)(Le.a,{gutterBottom:!0,style:{paddingRight:10,whiteSpace:"pre-line"},children:r.description})}),Object(n.jsx)(Ne.a,{container:!0,item:!0,children:Object(n.jsx)(on.a,{className:e.tableContainer,children:Object(n.jsx)(nn.a,{"aria-label":"tree details",children:Object(n.jsx)(an.a,{children:O.map((function(e,t){return e.value?Object(n.jsxs)(sn.a,{children:[Object(n.jsx)(cn.a,{children:Object(n.jsx)("b",{children:e.label})}),Object(n.jsx)(cn.a,{children:e.value})]},e.label):null}))})})})})]}),Object(n.jsx)(Ne.a,{item:!0,xs:12,md:6,children:Object(n.jsx)(Ve.a,{elevation:3,children:Object(n.jsx)(Qt,{trees:[r],mapCenter:[r.geolocation.y,r.geolocation.x],allowWheelZoom:!1,useSearchComponent:!1,small:!0})})}),Object(n.jsx)(Ne.a,{item:!0,xs:12,style:{marginTop:15},children:Object(n.jsx)(kn,{type:"trees",id:r.id,isCreatorOrModerator:o})})]})]})},_n=Object(We.a)({innerContent:{padding:20},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var Sn=function(){console.log("EditTree - start");var e=_n(),t=Object(Ge.a)(),r=Object(De.h)().id,c=Object(u.b)(),o=Object(a.useState)(null),s=Object(et.a)(o,2),i=s[0],l=s[1],d=Object(u.c)((function(e){return e.trees.status})),p=Object(u.c)((function(e){return e.trees.entities[r]})),j=Object(De.g)();"success"===d&&("delete"===i&&j.push("/trees"),"update"===i&&j.push("/trees/".concat(r)));var b=void 0!==p?{name:p.name,description:p.description||"",common_name:p.common_name||"",scientific_name:p.scientific_name||"",height:p.height||"",dsh:p.dsh||"",leaf_type:p.leaf_type||"",fruit_bearing:p.fruit_bearing||!1}:null,m=Object(a.useState)(b),h=Object(et.a)(m,2),O=h[0],f=h[1],g=Object(a.useState)({lat:void 0!==p?p.geolocation.y:null,lng:void 0!==p?p.geolocation.x:null}),y=Object(et.a)(g,2),w=y[0],k=y[1],C=Object(a.useState)([]),T=Object(et.a)(C,2),_=T[0],S=T[1],E=function(){var e=Object(he.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=Object(v.a)(Object(v.a)({},O),{},{geolocation:{latitude:parseFloat(w.lat),longitude:parseFloat(w.lng)},height:O.height||null,dsh:O.dsh||null}),l("update"),c(mr(r,n,_));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l("delete"),c(vt(p.creator,r)),c(hr(r));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:e.innerContent,children:[Object(n.jsx)(Le.a,{variant:"h4",gutterBottom:!0,children:"Edit Tree"}),Object(n.jsxs)("form",{onSubmit:E,className:e.form,children:[Object(n.jsx)(dr,{edit:!0,formData:O,onFormChange:function(e){var t=e.name,r=e.value;"fruit_bearing"===t&&(r=e.checked),f((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))}}),Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"Tree Location"}),Object(n.jsx)(Xt,{formData:w,onCoordinatesChange:function(e){var t=e.name,r=e.value;k((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))},onMapCoordinatesChange:function(e){k(e)}}),Object(n.jsx)(Be.a,{variant:"middle"}),Object(n.jsxs)("div",{children:[Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"Edit Images"}),Object(n.jsx)(Le.a,{gutterBottom:!0,children:"Ignore this section if you want to leave them the same. Any images added will overwrite previously uploaded images."}),Object(n.jsx)(lr,{onImageFilesChange:function(e){S(e)}}),Object(n.jsx)(Be.a,{variant:"middle"})]}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(n.jsx)(Qe.a,{color:"secondary",variant:"contained",onClick:function(){j.push("/trees/".concat(r))},children:"Go Back"}),Object(n.jsx)(Qe.a,{style:{backgroundColor:t.palette.error.main,color:t.palette.error.contrastText},variant:"contained",onClick:R,children:"Delete Tree"}),Object(n.jsx)(Qe.a,{color:"primary",variant:"contained",type:"submit",children:"Edit Tree"})]})]})]})};var En=function(e){var t=e.formData,r=e.onFormChange,a=e.edit,c=void 0!==a&&a,o=rt(),s=Object(u.c)((function(e){return e.groups.error}));console.log(s);var i=function(e){r(e.target)},l=function(e){return $e(e,s)};return Object(n.jsxs)(Ne.a,{container:!0,className:o.form,children:[Object(n.jsx)(tt.a,{id:"name",name:"name",label:"Group Name",placeholder:"Clallam Tree Alliance",onChange:i,value:t.name,required:!c,error:Boolean(l("group_name")),helperText:l("group_name")}),Object(n.jsx)(tt.a,{id:"description",name:"description",label:"Description",multiline:!0,inputProps:{maxLength:2e3},placeholder:"What is the main purpose of your group?",onChange:i,value:t.description})]})},Rn=Object(We.a)({innerContent:{padding:20},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var An=function(){var e=Rn(),t=Object(u.b)(),r=Object(De.g)(),c=Object(u.c)((function(e){return e.currUser.uid})),o=Object(a.useState)({name:"",description:"",is_public:!0}),s=Object(et.a)(o,2),i=s[0],l=s[1],d=Object(a.useState)([]),p=Object(et.a)(d,2),j=p[0],b=p[1],m=function(){var e=Object(he.a)(me.a.mark((function e(n){var a,o,s;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in n.preventDefault(),a=Object(v.a)({},i))""===a[o]&&delete a[o];return console.log("new group",a),e.next=6,t(Ur(a,j));case 6:s=e.sent,t(yt(c,s,!0)),s&&(console.log("CreateNewGroup - groupId",s),r.push("/groups/".concat(s)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:e.innerContent,children:[Object(n.jsx)(Le.a,{variant:"h4",gutterBottom:!0,children:"Create New Group"}),Object(n.jsxs)("form",{onSubmit:m,className:e.form,children:[Object(n.jsx)(En,{formData:i,onFormChange:function(e){var t=e.name,r=e.value;"is_public"===t&&(r=e.checked),l((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))}}),Object(n.jsx)(Be.a,{variant:"middle",style:{marginTop:15,marginBottom:15}}),Object(n.jsxs)("div",{children:[Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"Group Header Image"}),Object(n.jsx)(lr,{allowMultiple:!1,onImageFilesChange:function(e){console.log("handleImageFilesChange",e),b(e)}}),Object(n.jsx)(Be.a,{variant:"middle",style:{marginBottom:15}})]}),Object(n.jsx)(Qe.a,{color:"secondary",variant:"contained",type:"submit",children:"Create Group"})]})]})},Un=r(269),In=r(270),Mn=r(344),Pn=r.p+"static/media/profile-page-header.9539a791.jpg",Gn=Object(We.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},headerImgBackground:{height:300,backgroundImage:"url(".concat(Pn,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:e.palette.secondary.dark}}}));var Dn=function(){var e=Object(Ge.a)(),t=(Gn(e),Object(De.g)(),Object(u.c)((function(e){return e.currUser}))),r=(t.uid,t.username),a=t.email,c=(t.img_url,t.created_at);return t.is_admin,t.savedTreeIds,t.groupIds,Object(n.jsx)(Ne.a,{container:!0,item:!0,xs:12,children:Object(n.jsxs)(Ne.a,{container:!0,direction:"column",children:[Object(n.jsx)(Le.a,{variant:"h5",children:"User Info"}),Object(n.jsxs)(Le.a,{variant:"subtitle1",children:["Username: ",r]}),Object(n.jsxs)(Le.a,{variant:"subtitle1",children:["Email: ",a]}),Object(n.jsxs)(Le.a,{variant:"subtitle1",children:["Joined:"," ",new Date(c).toLocaleDateString("en-gb",{year:"numeric",month:"long",day:"numeric"})]})]})})},Nn=Object(We.a)((function(e){return{accordianContainer:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},headerImgBackground:{height:300,backgroundImage:"url(".concat(Pn,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:e.palette.secondary.dark},innerContent:{padding:20},divider:{width:"90%",marginTop:10,marginBottom:10}}}));var Fn=function(){var e=Object(Ge.a)(),t=Nn(e),r=Object(De.g)(),a=Object(u.c)((function(e){return e.currUser})),c=a.uid,o=a.username,s=(a.email,a.img_url,a.created_at,a.is_admin,a.savedTreeIds),i=a.followedGroupIds,l=Object(u.c)((function(e){return Object.values(e.trees.entities).filter((function(e){return s.includes(e.id)}))})),d=Object(u.c)((function(e){return Object.values(e.trees.entities).filter((function(e){return e.creator===c}))})),p=Object(u.c)((function(e){return Object.values(e.groups.entities).filter((function(e){return i.includes(e.id)}))})),j=Object(u.c)((function(e){return Object.values(e.groups.entities).filter((function(e){return e.creator===c}))}));return Object(u.c)((function(e){return e.groups.entities})),Object(n.jsxs)(Ne.a,{container:!0,direction:"column",children:[Object(n.jsx)(Ne.a,{className:t.headerImgBackground,container:!0,justify:"center",alignItems:"flex-end",item:!0,xs:12,children:Object(n.jsx)("div",{style:{height:300}})}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,className:t.innerContent,children:[Object(n.jsxs)(Ne.a,{container:!0,item:!0,children:[Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(Dn,{})}),Object(n.jsx)(Ne.a,{item:!0,children:Object(n.jsx)(Qe.a,{color:"secondary",variant:"outlined",onClick:function(){r.push("/users/".concat(o,"/edit"))},children:"Edit User"})})]}),Object(n.jsx)(Be.a,{className:t.divider}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,children:[Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,lg:3,direction:"column",children:[Object(n.jsx)(ht.a,{mr:2,children:Object(n.jsx)(Le.a,{variant:"h5",children:"My Trees"})}),Object(n.jsx)(Un.a,{dense:!0,children:d.length>0?d.map((function(e){return Object(n.jsx)(In.a,{button:!0,component:je.b,to:"/trees/".concat(e.id),children:Object(n.jsx)(Mn.a,{children:e.name})},"tree-".concat(e.id))})):Object(n.jsx)(Ne.a,{children:Object(n.jsx)(Le.a,{children:"No Created Trees"})})})]}),Object(n.jsx)(Fe.a,{smUp:!0,children:Object(n.jsx)(Be.a,{className:t.divider})}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,lg:3,direction:"column",children:[Object(n.jsx)(ht.a,{mr:2,children:Object(n.jsx)(Le.a,{variant:"h5",children:"Favorite Trees"})}),Object(n.jsx)(Un.a,{dense:!0,children:l.length>0?l.map((function(e){return Object(n.jsx)(In.a,{button:!0,component:je.b,to:"/trees/".concat(e.id),children:Object(n.jsx)(Mn.a,{children:e.name})},"tree-".concat(e.id))})):Object(n.jsx)(Ne.a,{children:Object(n.jsx)(Le.a,{children:"No Favorite Trees"})})})]}),Object(n.jsx)(Fe.a,{lgUp:!0,children:Object(n.jsx)(Be.a,{className:t.divider})}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,lg:3,direction:"column",children:[Object(n.jsx)(ht.a,{mr:2,children:Object(n.jsx)(Le.a,{variant:"h5",children:"My Groups"})}),Object(n.jsx)(Un.a,{dense:!0,children:j.length>0?j.map((function(e){return Object(n.jsx)(In.a,{button:!0,component:je.b,to:"/groups/".concat(e.id),children:Object(n.jsx)(Mn.a,{children:e.name})},"group-".concat(e.id))})):Object(n.jsx)(Ne.a,{children:Object(n.jsx)(Le.a,{children:"No Created Groups"})})})]}),Object(n.jsx)(Fe.a,{smUp:!0,children:Object(n.jsx)(Be.a,{className:t.divider})}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,md:6,lg:3,direction:"column",children:[Object(n.jsx)(ht.a,{mr:2,children:Object(n.jsx)(Le.a,{variant:"h5",children:"Followed Groups"})}),Object(n.jsx)(Un.a,{dense:!0,children:p.length>0?p.map((function(e){return Object(n.jsx)(In.a,{button:!0,component:je.b,to:"/groups/".concat(e.id),children:Object(n.jsx)(Mn.a,{children:e.name})},"group-".concat(e.id))})):Object(n.jsx)(Ne.a,{children:Object(n.jsx)(Le.a,{children:"No Followed Groups"})})})]})]})]})]})},Bn=r(345),Ln=r(346);var Wn=function(e){var t=e.groupId,r=Object(Ge.a)(),c=Object(a.useState)(null),o=Object(et.a)(c,2),s=o[0],i=o[1],l=Object(u.c)((function(e){return e.currUser.uid})),d=Object(u.c)((function(e){return e.currUser.followedGroupIds})),p=Object(u.b)();Object(a.useEffect)((function(){!function(e,t){i(t.includes(e))}(t,d)}),[d,t]);var j=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(s?wt(l,t):yt(l,t)),i(!s);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(Ot.a,{title:s?"Unfollow":"Follow",children:Object(n.jsx)(dt.a,{onClick:j,children:s?Object(n.jsx)(Bn.a,{htmlColor:r.palette.primary.light}):Object(n.jsx)(Ln.a,{htmlColor:r.palette.primary.light})})})},qn=r(366);var zn=function(e){var t=e.group,r=e.groupTrees;console.log("GroupTreeEditTable - Start",t,r);var c=Object(u.b)(),o=Object(u.c)((function(e){return e.currUser.savedTreeIds}));console.log("GroupTreeEditTable - currUserFavTreeIds",o);var s=Object(u.c)((function(e){return o.map((function(t){return e.trees.entities[t]}))})),i=o.filter((function(e){return!s.map((function(e){return e.id})).includes(e)}));Object(a.useEffect)((function(){i.forEach((function(e){var t=c(jr(e));s.push(t)}))}),[]);var l=new Set([].concat(Object(ne.a)(r),Object(ne.a)(s)));return Object(n.jsx)(Vr,{trees:Object(ne.a)(l),group:t})},Hn=r(347),Vn=Object(We.a)((function(e){return{button:{marginTop:5,marginBottom:5},userInfo:{display:"flex",alignItems:"center"},listItem:Object(x.a)({display:"flex",flexDirection:"column",alignItems:"flex-start"},e.breakpoints.up("md"),{display:"flex",flexDirection:"row",justifyContent:"space-between"})}}));var Qn=function(e){var t=e.isCreator,r=e.isModerator,a=e.groupId,c=e.users,o=e.type,s=Object(Ge.a)(),i=Object(u.b)(),l=Vn(s),d=Object(u.c)((function(e){return e.auth.authenticated})),p=function(e,c){return d?t&&"mods"===e?Object(n.jsx)(Qe.a,{className:l.button,size:"small",color:"secondary",variant:"contained",onClick:function(){return i(function(e,t){return console.log("Actions - removeModFromGroup - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.groupRemoveMod(e,t);case 4:n({type:D}),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),console.log("Actions - removeModFromGroup error",r.t0),n(Lr(r.t0)),n({type:N});case 12:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()}(a,c))},children:"Remove As Mod"}):"members"===e?Object(n.jsxs)("div",{children:[r&&Object(n.jsx)(Qe.a,{className:l.button,style:{marginRight:5},size:"small",color:"secondary",variant:"contained",onClick:function(){return i(function(e,t){return console.log("currUser - removeFromFollowedGroups - ",t,e),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.userRemoveGroup(t,e);case 4:n({type:M,payload:{groupId:e,userId:t}}),n({type:D}),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(1),console.log("removeFromFollowedGroups error",r.t0),n(Lr(r.t0)),n({type:N});case 13:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()}(a,c))},children:"Remove Member"}),t&&Object(n.jsx)(Qe.a,{className:l.button,size:"small",color:"primary",variant:"contained",onClick:function(){return i(function(e,t){return console.log("Actions - addModToGroup - ",e,t),function(){var r=Object(he.a)(me.a.mark((function r(n){return me.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:G}),r.prev=1,r.next=4,Ae.groupAddMod(e,t);case 4:n({type:D}),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),console.log("Actions - addModToGroup error",r.t0),n(Lr(r.t0)),n({type:N});case 12:case"end":return r.stop()}}),r,null,[[1,7]])})));return function(e){return r.apply(this,arguments)}}()}(a,c))},children:"Add As Mod"})]}):null:null};return Object(n.jsx)(Un.a,{dense:!0,children:c.map((function(e){return Object(n.jsxs)(In.a,{className:l.listItem,divider:!0,children:[Object(n.jsxs)("div",{className:l.userInfo,children:[Object(n.jsx)(Hn.a,{children:Object(n.jsx)(jn.a,{children:e.username[0]})}),Object(n.jsx)(Mn.a,{primary:e.username})]}),Object(n.jsx)("div",{style:{display:"flex"},children:p(o,e.user_id)})]},e.username)}))})},Kn=Object(We.a)((function(e){return{tabPanel:{flexGrow:1,backgroundColor:"white",width:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var Xn=function(e){var t=e.isCreator,r=e.isModerator,a=e.group;console.log("GroupMembersPanel - Start");var c=Object(Ge.a)();Kn(c),Object(u.b)(),Object(u.c)((function(e){return e.groups.status})),console.log("GroupMembersPanel",a);var o=a.members.find((function(e){return e.user_id===a.creator})),s=a.members.filter((function(e){return!0===e.is_moderator&&e.user_id!==a.creator})),i=a.members.filter((function(e){return!1===e.is_moderator}));return console.log("GroupMembersPanel",o,Boolean(s),i),Object(n.jsxs)("div",{children:[Object(n.jsx)(Le.a,{gutterBottom:!0,variant:"h6",children:"Creator"}),Object(n.jsx)(Qn,{groupId:a.id,users:[o]}),Object(n.jsx)(Le.a,{gutterBottom:!0,variant:"h6",children:"Moderators"}),s.length?Object(n.jsx)(Qn,{isCreator:t,isModerator:r,groupId:a.id,users:s,type:"mods"}):Object(n.jsx)(Le.a,{gutterBottom:!0,children:"No moderators in this group."}),Object(n.jsx)(Le.a,{gutterBottom:!0,variant:"h6",children:"Members"}),i.length?Object(n.jsx)(Qn,{isCreator:t,isModerator:r,groupId:a.id,users:i,type:"members"}):Object(n.jsx)(Le.a,{gutterBottom:!0,children:"No members in this group."})]})},Jn=Object(We.a)((function(e){return{tabPanel:{flexGrow:1,backgroundColor:"white",width:"100%"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function Yn(e){var t=e.children,r=e.value,a=e.index,c=Object(f.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(v.a)(Object(v.a)({role:"tabpanel",hidden:r!==a,id:"group-tabpanel-".concat(a),"aria-labelledby":"group-tab-".concat(a)},c),{},{children:r===a&&Object(n.jsx)(ht.a,{p:3,children:t})}))}function Zn(e){return{id:"group-tab-".concat(e),"aria-controls":"group-tabpanel-".concat(e)}}var $n=function(e){var t=e.group,r=e.isCreator,c=(e.imageUrls,Object(Ge.a)()),o=Jn(c),s=Object(u.b)(),i=Object(a.useState)(0),l=Object(et.a)(i,2),d=l[0],p=l[1],j=Object(a.useState)(!1),b=Object(et.a)(j,2),m=b[0],h=b[1],O=Object(u.c)((function(e){return e.currUser.uid})),f=Boolean(t.members.find((function(e){return e.user_id===O&&!0===e.is_moderator}))),g=Object(u.c)((function(e){return Object(ne.a)(t.trees).map((function(t){return e.trees.entities[t]}))})),x=t.trees.filter((function(e){return!g.map((function(e){return e.id})).includes(e)}));return console.log("GroupTapPanal remainingSelectionTree",x),console.log("GroupTapPanal groupTrees",g),Object(a.useEffect)((function(){x.forEach((function(e){var t=s(jr(e));g.push(t)}))}),[s,g,x]),Object(n.jsxs)("div",{className:o.tabPanel,children:[Object(n.jsx)(Cr.a,{position:"static",children:Object(n.jsxs)(Tr.a,{value:d,onChange:function(e,t){p(t)},variant:"fullWidth","aria-label":"group tabs",centered:!0,children:[Object(n.jsx)(_r.a,Object(v.a)({label:"Trees"},Zn(0))),Object(n.jsx)(_r.a,Object(v.a)({label:"Album"},Zn(1))),Object(n.jsx)(_r.a,Object(v.a)({label:"Members"},Zn(2)))]})}),Object(n.jsx)(Yn,{value:d,index:0,children:Object(n.jsxs)(Ne.a,{container:!0,direction:"column",children:[Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,justify:"center",children:[f&&Object(n.jsx)(Qe.a,{color:"primary",onClick:function(){h(!0)},style:{marginBottom:20},children:"Edit Group Trees"}),Object(n.jsx)(qn.a,{className:o.backdrop,open:m,onClick:function(e){h(!1)},children:Object(n.jsx)(ht.a,{style:{backgroundColor:"white",width:"85vw",maxWidth:1500,height:"".concat(120+52*Math.min(g.length,10),"px"),zIndex:10,color:"white"},onClick:function(e){e.stopPropagation()},children:Object(n.jsx)(zn,{group:t,groupTrees:g})})})]}),Object(n.jsx)(Ne.a,{container:!0,item:!0,xs:12,justify:"center",children:g.length>0?Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,children:[Object(n.jsx)(Ne.a,{item:!0,xs:12,xl:6,children:Object(n.jsx)(Ve.a,{elevation:3,children:Object(n.jsx)(Qt,{trees:g})})}),Object(n.jsx)(Ne.a,{container:!0,item:!0,xs:12,xl:6,children:Object(n.jsx)(ht.a,{p:2,style:{height:"".concat(120+52*Math.min(g.length,10),"px"),width:"100%"},children:Object(n.jsx)(Vr,{trees:g})})})]}):Object(n.jsx)(Le.a,{align:"center",children:"No trees within this group yet. Only moderators can edit trees of this group."})})]})}),Object(n.jsx)(Yn,{value:d,index:1,children:"Album"}),Object(n.jsx)(Yn,{value:d,index:2,children:Object(n.jsx)(Xn,{isCreator:r,isModerator:f,group:t})})]})},ea=Object(We.a)((function(e){return{innerContent:{padding:15},tableContainer:{marginRight:10}}}));var ta=function(){console.log("GroupPage - start");var e=ea(),t=Object(De.g)(),r=Object(Ge.a)(),c=Object(De.h)().id,o=Object(u.c)((function(e){return e.auth.authenticated})),s=Object(u.c)((function(e){return e.groups.entities[c]})),i=Object(u.c)((function(e){return e.currUser.uid})),l=Object(u.c)((function(e){return e.groups.error})),d=i===s.creator,p=s.members.find((function(e){return!0===e.is_moderator&&e.user_id===i}));console.log("GroupPage - group",s);var j=Object(a.useState)(!0),b=Object(et.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)({primary:"",album:[]}),f=Object(et.a)(O,2),g=f[0],x=f[1],v=Object(u.b)();return Object(a.useEffect)((function(){(function(){var e=Object(he.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(Ir(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(c)}),[c,l,v,t]),Object(a.useEffect)((function(){m&&function(){var e=Object(he.a)(me.a.mark((function e(t,r){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt(t,r);case 2:n=e.sent,console.log("imgUrls",n),n&&x(n),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()(Pt,c)}),[m,c]),m?Object(n.jsx)("div",{children:"Loading"}):Object(n.jsxs)(Ne.a,{className:"GroupPage",container:!0,direction:"column",children:[Object(n.jsx)(Ne.a,{item:!0,xs:12,children:function(e){return""===e.primary?null:Object(n.jsx)(Ne.a,{container:!0,justify:"center",alignItems:"flex-end",item:!0,xs:12,style:{height:300,backgroundImage:"url(".concat(e.primary,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:r.palette.secondary.dark},children:Object(n.jsx)("div",{style:{height:300}})})}(g)}),Object(n.jsxs)(Ne.a,{className:e.innerContent,container:!0,item:!0,xs:12,alignItems:"flex-start",children:[Object(n.jsxs)(Ne.a,{container:!0,item:!0,xs:12,wrap:"nowrap",justify:"space-between",children:[Object(n.jsx)(Le.a,{variant:"h3",gutterBottom:!0,children:s.name}),Object(n.jsxs)(Ne.a,{item:!0,children:[o&&!d&&Object(n.jsx)(Wn,{groupId:s.id}),d&&Object(n.jsx)(xn,{type:"groups",id:s.id})]})]}),s.description&&Object(n.jsx)(Ne.a,{item:!0,xs:12,style:{marginBottom:15},children:Object(n.jsx)(Le.a,{gutterBottom:!0,style:{whiteSpace:"pre-line"},children:s.description})}),Object(n.jsx)(Ne.a,{item:!0,xs:12,children:Object(n.jsx)($n,{isCreator:d,group:s,imageUrls:g})}),Object(n.jsx)(Ne.a,{item:!0,xs:12,style:{marginTop:15},children:Object(n.jsx)(kn,{type:"groups",id:s.id,isCreatorOrModerator:d||p})})]})]})},ra=Object(We.a)({innerContent:{padding:20},form:{display:"flex",flexDirection:"column","& div":{marginBottom:10}}});var na=function(){var e=ra(),t=Object(Ge.a)(),r=Object(u.b)(),c=Object(De.h)().id,o=Object(De.g)(),s=Object(a.useState)(null),i=Object(et.a)(s,2),l=i[0],d=i[1],p=Object(u.c)((function(e){return e.groups.status})),j=Object(u.c)((function(e){return e.groups.entities[c]}));"success"===p&&("edit"===l&&o.push("/groups/".concat(c)),"delete"===l&&o.push("/groups"));var b=Object(a.useState)({name:"",description:"",is_public:!0}),m=Object(et.a)(b,2),h=m[0],O=m[1],f=function(){var e=Object(he.a)(me.a.mark((function e(t){var n,a;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t.preventDefault(),n=Object(v.a)({},h))""===n[a]&&delete n[a];console.log("EditGroup - editGroup",n),d("edit"),r(Pr(c,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(he.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d("delete"),r(wt(j.creator,c)),r(Gr(c));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:e.innerContent,children:[Object(n.jsx)(Le.a,{variant:"h4",gutterBottom:!0,children:"Edit Group"}),Object(n.jsxs)("form",{onSubmit:f,className:e.form,children:[Object(n.jsx)(En,{formData:h,onFormChange:function(e){var t=e.name,r=e.value;"is_public"===t&&(r=e.checked),O((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(x.a)({},t,r))}))},edit:!0}),Object(n.jsxs)(Ne.a,{container:!0,item:!0,justify:"space-between",style:{paddingLeft:40,paddingRight:40},children:[Object(n.jsx)(Qe.a,{onClick:function(){o.push("/groups/".concat(c))},variant:"contained",color:"secondary",children:"Go Back"}),Object(n.jsx)(Qe.a,{onClick:g,variant:"contained",style:{backgroundColor:t.palette.error.dark,color:t.palette.error.contrastText},children:"Delete Group"}),Object(n.jsx)(Qe.a,{variant:"contained",color:"primary",type:"submit",children:"Save Edits"})]})]})]})},aa=Object(We.a)((function(e){return{innerContent:{padding:20,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[4],"& > h5":{marginTop:10},"& > p":{marginLeft:20}}}}));var ca=function(){var e=Object(Ge.a)(),t=aa(e);return Object(n.jsxs)(Ne.a,{container:!0,className:t.innerContent,direction:"column",children:[Object(n.jsx)(Le.a,{align:"center",variant:"h3",style:{fontWeight:"bold"},gutterBottom:!0,children:"About Tree-Markable"}),Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"What is Tree-Markable?"}),Object(n.jsx)(Le.a,{gutterBottom:!0,children:"Tree-Markable began as an idea inspired by some of the amazing ways in which local communities enable their residents to have meaningful engagement with their local urban forest."}),Object(n.jsx)(Le.a,{gutterBottom:!0,children:"Users can share trees that they find remarkable to give some recognition to the silent heroes that do so much for our communities through ecosystem services, climate change resilience, and their intrinsic value. Users can also make and join groups for more specific purposes or collections of trees such as for neighborhoods, national champion trees, favorite species, etc."}),Object(n.jsx)(Le.a,{gutterBottom:!0,children:"Anyone can search through the shared trees or groups, but signing up with Tree-Markable (no cost or spam) allows you to share your own, join groups, and comment on trees or groups."}),Object(n.jsx)(Le.a,{variant:"h5",gutterBottom:!0,children:"Who made Tree-Markable?"}),Object(n.jsxs)(Le.a,{gutterBottom:!0,children:["Tree-Markable is a personal, open source project by the Clallam Tree Alliance, and as such is an evolving project that is subject to change in the future. This web app was created with the goal of enabling anyone interested in finding and sharing remarkable trees with their local communities and the world at large. Check the"," ",Object(n.jsx)(Ze.a,{href:"https://github.com/jvendettuoli/tree-markable",rel:"norefferer",target:"_blank",style:{color:e.palette.primary.light},children:"GitHub"})," ","for the project if you are interested in the technology used, or seeing the features that are planned for the future, like paths to add tree walks, expanded image handling, custom map markers, and more!"]}),Object(n.jsxs)(Le.a,{variant:"h5",gutterBottom:!0,children:["What is the"," ",Object(n.jsx)(Ze.a,{href:"https://www.facebook.com/clallamtreealliance",rel:"norefferer",target:"_blank",style:{color:e.palette.primary.light},children:"Clallam Tree Alliance"}),"?"]}),Object(n.jsx)(Le.a,{gutterBottom:!0,children:"Clallam Tree Alliance started as a group of individuals looking to form an officially recognized tree board for the City of Port Angeles, WA. After some assessment and evolution of priorities, we are now a group of dedicated volunteers that aims to strengthen our understanding and deepen our appreciation of the economic, social, environmental and aesthetic gifts that trees bring to our lives. We hold planting events to increase the cover of native plants and trees within the city, engage with the public and local policy makers about the importance of a healthy urban forest canopy, and occasionally donate happy plants to loving homes."}),Object(n.jsx)(Le.a,{align:"center",variant:"h4",gutterBottom:!0,style:{marginTop:15},color:"primary",children:"We hope you enjoy sharing and exploring remarkable trees, and be sure to check back in as this project grows from a sapling to a full-fledged tree!"})]})},oa=function(e){var t=e.component,r=Object(f.a)(e,["component"]),a=Object(u.c)((function(e){return e.currUser.uid}));return Object(n.jsx)(De.b,Object(v.a)(Object(v.a)({},r),{},{render:function(e){return a?Object(n.jsx)(t,Object(v.a)({},e)):Object(n.jsx)(De.a,{to:"/signin"})}}))},sa=function(e){var t=e.component,r=Object(f.a)(e,["component"]),a=r.location.pathname.split("/"),c=Object(et.a)(a,3),o=(c[0],c[1]),s=c[2],i=Object(u.c)((function(e){return e.currUser.uid}))===Object(u.c)((function(e){return e[o].entities[s].creator}));return Object(n.jsx)(De.b,Object(v.a)(Object(v.a)({},r),{},{render:function(e){return i?Object(n.jsx)(t,Object(v.a)({},e)):Object(n.jsx)(De.a,{to:"/".concat(o)})}}))},ia=function(e){var t=e.component,r=Object(f.a)(e,["component"]),a=r.location.pathname;console.log("PATHNAME:",a),console.log("PATHNAME:",a.split("/"));var c=a.split("/"),o=Object(et.a)(c,3),s=o[0],i=o[1],l=o[2];console.log("blank:",s),console.log("type:",i),console.log("id:",l);var d=Object(u.c)((function(e){return e.currUser.username}))===l;return Object(n.jsx)(De.b,Object(v.a)(Object(v.a)({},r),{},{render:function(e){return d?Object(n.jsx)(t,Object(v.a)({},e)):Object(n.jsx)(De.a,{to:"/signin"})}}))};var ua=function(){return Object(De.g)(),Object(u.c)((function(e){return e.auth.error})),Object(u.c)((function(e){return e.currUser.error})),Object(u.c)((function(e){return e.groups.error})),Object(u.c)((function(e){return e.trees.error})),Object(n.jsxs)(De.d,{children:[Object(n.jsx)(De.b,{exact:!0,path:"/",children:Object(n.jsx)(Ye,{})}),Object(n.jsx)(De.b,{exact:!0,path:"/about",children:Object(n.jsx)(ca,{})}),Object(n.jsx)(ia,{component:Fn,exact:!0,path:"/users/:username"}),Object(n.jsx)(ia,{component:nr,exact:!0,path:"/users/:username/edit"}),Object(n.jsx)(De.b,{exact:!0,path:"/signup",children:Object(n.jsx)(Zt,{})}),Object(n.jsx)(De.b,{exact:!0,path:"/signin",children:Object(n.jsx)(tr,{})}),Object(n.jsx)(De.b,{exact:!0,path:"/trees",children:Object(n.jsx)(Jr,{})}),Object(n.jsx)(oa,{component:vr,exact:!0,path:"/trees/new"}),Object(n.jsx)(De.b,{exact:!0,path:"/trees/:id",children:Object(n.jsx)(Tn,{})}),Object(n.jsx)(sa,{component:Sn,exact:!0,path:"/trees/:id/edit"}),Object(n.jsx)(De.b,{exact:!0,path:"/groups",children:Object(n.jsx)(rn,{})}),Object(n.jsx)(oa,{component:An,exact:!0,path:"/groups/new"}),Object(n.jsx)(De.b,{exact:!0,path:"/groups/:id",children:Object(n.jsx)(ta,{})}),Object(n.jsx)(sa,{component:na,exact:!0,path:"/groups/:id/edit"}),Object(n.jsx)(De.b,{exact:!0,path:"/404",children:Object(n.jsx)(kr,{})}),Object(n.jsx)(De.b,{children:Object(n.jsx)(kr,{})})]})},la=r(362),da=200,pa=Object(We.a)((function(e){var t,r;return{root:{display:"flex"},drawer:(t={},Object(x.a)(t,e.breakpoints.up("md"),{width:da,flexShrink:0}),Object(x.a)(t,"& .MuiDrawer-paperAnchorDockedLeft",{borderRightColor:e.palette.primary.dark}),t),appBar:Object(x.a)({},e.breakpoints.up("md"),{width:"calc(100% - ".concat(da,"px)"),marginLeft:da}),menuButton:Object(x.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),toolbar:Object(v.a)(Object(v.a)({},e.mixins.toolbar),{},{display:"flex",justifyContent:"space-between",backgroundColor:e.palette.primary.dark}),drawerPaper:{width:da},content:(r={flexGrow:1,backgroundColor:e.palette.primary.lightest},Object(x.a)(r,e.breakpoints.up("lg"),{paddingLeft:e.spacing(20),paddingRight:e.spacing(20)}),Object(x.a)(r,e.breakpoints.up("xl"),{paddingLeft:e.spacing(40),paddingRight:e.spacing(40)}),r),nested:{paddingLeft:e.spacing(4)}}})),ja=r(273),ba=r(348),ma=r(349),ha=r(350);var Oa=Object(De.i)((function(e){var t=e.location.pathname,r=Object(u.c)((function(e){return e.auth.authenticated})),a=Object(Ge.a)(),c=pa(a);return Object(n.jsxs)("div",{children:[Object(n.jsx)(Ve.a,{className:c.toolbar,style:{backgroundColor:a.palette.primary.dark,justifyContent:"center",alignItems:"center"},square:!0,elevation:5,children:Object(n.jsx)(Le.a,{align:"center",variant:"h5",noWrap:!0,style:{color:"white"},children:"Tree-Markable"})}),Object(n.jsx)(Be.a,{}),Object(n.jsxs)(Un.a,{children:[Object(n.jsxs)(In.a,{button:!0,component:je.b,to:"/",selected:"/"===t,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(ba.a,{})}),Object(n.jsx)(Mn.a,{primary:"Home"})]}),Object(n.jsx)(Be.a,{}),Object(n.jsxs)(In.a,{style:{backgroundColor:a.palette.secondary.lightest},disabled:!r,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(Ar.a,{})}),Object(n.jsx)(Mn.a,{primary:"Create"})]}),Object(n.jsxs)(Un.a,{component:"div",disablePadding:!0,children:[Object(n.jsxs)(In.a,{button:!0,className:c.nested,component:je.b,to:"/trees/new",selected:"/trees/new"===t,disabled:!r,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(lt.a,{})}),Object(n.jsx)(Mn.a,{primary:"Tree"})]}),Object(n.jsxs)(In.a,{button:!0,className:c.nested,component:je.b,to:"/groups/new",selected:"/groups/new"===t,disabled:!r,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(Bn.a,{})}),Object(n.jsx)(Mn.a,{primary:"Group"})]})]})]}),Object(n.jsx)(Be.a,{}),Object(n.jsxs)(Un.a,{style:{paddingTop:0},children:[Object(n.jsxs)(In.a,{style:{backgroundColor:a.palette.secondary.lightest},children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(ma.a,{})}),Object(n.jsx)(Mn.a,{primary:"Explore"})]}),Object(n.jsxs)(Un.a,{component:"div",disablePadding:!0,children:[Object(n.jsxs)(In.a,{button:!0,className:c.nested,component:je.b,to:"/trees",selected:"/trees"===t,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(lt.a,{})}),Object(n.jsx)(Mn.a,{primary:"Trees"})]}),Object(n.jsxs)(In.a,{button:!0,className:c.nested,component:je.b,to:"/groups",selected:"/groups"===t,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(Bn.a,{})}),Object(n.jsx)(Mn.a,{primary:"Groups"})]})]}),Object(n.jsx)(Be.a,{}),Object(n.jsxs)(In.a,{button:!0,component:je.b,to:"/about",selected:"/about"===t,children:[Object(n.jsx)(ja.a,{children:Object(n.jsx)(ha.a,{})}),Object(n.jsx)(Mn.a,{primary:"About"})]})]})]})})),fa=r(353),ga=r(351),xa=r(352),va=r(330);var ya=function(e){var t=e.handleDrawerToggle,r=(Object(f.a)(e,["handleDrawerToggle"]),Object(De.g)()),c=Object(Ge.a)(),o=pa(c),s=Object(u.c)((function(e){return e.auth.authenticated})),i=Object(u.c)((function(e){return e.currUser.username})),l=Object(u.b)(),d=Object(a.useState)(null),p=Object(et.a)(d,2),j=p[0],b=p[1],m=Boolean(j),h=function(){b(null)};return Object(n.jsx)(Cr.a,{position:"fixed",className:o.appBar,children:Object(n.jsxs)(va.a,{className:o.toolbar,children:[Object(n.jsx)(dt.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:t,className:o.menuButton,children:Object(n.jsx)(ga.a,{})}),Object(n.jsx)(Fe.a,{mdUp:!0,implementation:"js",children:Object(n.jsx)(Le.a,{variant:"h6",noWrap:!0,children:"Tree-Markable"})}),Object(n.jsx)(Fe.a,{smDown:!0,implementation:"js",children:Object(n.jsx)("div",{})}),s?Object(n.jsxs)("div",{children:[Object(n.jsx)(dt.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){b(e.currentTarget)},color:"inherit",children:Object(n.jsx)(xa.a,{})}),Object(n.jsxs)(hn.a,{id:"menu-appbar",anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:m,onClose:h,children:[Object(n.jsx)(or.a,{onClick:function(){h(),r.push("/users/".concat(i))},children:"Profile"}),Object(n.jsx)(or.a,{onClick:function(){h(),l(Ue()),r.push("/")},children:"Sign Out"})]})]}):Object(n.jsx)("div",{children:Object(n.jsxs)(fa.a,{size:"small",variant:"text",children:[Object(n.jsx)(Qe.a,{style:{color:"white"},component:je.b,to:"/signup",children:"Sign Up"}),Object(n.jsx)(Qe.a,{style:{color:"white"},component:je.b,to:"/signin",children:"Sign In"})]})})]})})};var wa=function(e){var t=e.window,r=e.children,o=Object(Ge.a)(),s=pa(o),i=Object(a.useState)(!1),l=Object(et.a)(i,2),d=l[0],p=l[1],j=(Object(u.c)((function(e){return e.auth.authenticated})),Object(u.b)(),c.a.useState(null)),b=Object(et.a)(j,2),m=b[0],h=(b[1],Boolean(m),function(){p(!d)}),O=void 0!==t?function(){return t().document.body}:void 0;return Object(n.jsxs)("div",{className:s.root,children:[Object(n.jsx)(ya,{handleDrawerToggle:h}),Object(n.jsxs)("nav",{className:s.drawer,"aria-label":"navigation drawer",children:[Object(n.jsx)(Fe.a,{mdUp:!0,implementation:"js",children:Object(n.jsx)(la.a,{container:O,variant:"temporary",anchor:"rtl"===o.direction?"right":"left",open:d,onClose:h,classes:{paper:s.drawerPaper},ModalProps:{keepMounted:!0},children:Object(n.jsx)(Oa,{})})}),Object(n.jsx)(Fe.a,{smDown:!0,implementation:"js",children:Object(n.jsx)(la.a,{classes:{paper:s.drawerPaper},variant:"permanent",open:!0,children:Object(n.jsx)(Oa,{})})})]}),Object(n.jsxs)("main",{className:s.content,children:[Object(n.jsx)("div",{className:s.toolbar}),r]})]})};var ka=function(){var e=Object(Ge.a)(),t=(pa(e),Object(u.b)());return Object(a.useEffect)((function(){var e=t((function(e){try{return fe.onAuthStateChanged(function(){var t=Object(he.a)(me.a.mark((function t(r){return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r?console.log("verifyAuth - user",r):(console.log("verifyAuth - no user"),e(Ue()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(t){console.log("verifyAuth error",t),e(Me(t))}}));return function(){return e()}}),[t]),Object(n.jsx)(je.a,{children:Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(wa,{children:Object(n.jsx)(ua,{})})})})},Ca=r(357),Ta=r(183),_a=r(356),Sa=r(354),Ea=r(355),Ra=Object(Ta.a)({palette:{primary:{main:Sa.a[900],accent:Sa.a.A400,lightest:Sa.a[50]},secondary:{main:Ea.a[500],lightest:Ea.a[50]}}});s.a.render(Object(n.jsx)(u.a,{store:de,children:Object(n.jsx)(i.a,{loading:null,persistor:pe,children:Object(n.jsx)(_a.a,{theme:Ra,children:Object(n.jsx)(Ca.a,{children:Object(n.jsx)(ka,{})})})})}),document.getElementById("root"))}},[[263,1,2]]]);
//# sourceMappingURL=main.7d03f724.chunk.js.map